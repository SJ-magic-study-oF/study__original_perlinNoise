<!DOCTYPE html>
<!-- saved from url=(0043)http://postd.cc/understanding-perlin-noise/ -->
<html lang="ja" itemscope="" itemtype="http://schema.org/Article" prefix="og: http://ogp.me/ns#" class="js"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<div class="fit-vids-style" id="fit-vids-style" style="display: none;">­<style>.fluid-width-video-wrapper{width:100%;position:relative;padding:0;}.fluid-width-video-wrapper iframe,.fluid-width-video-wrapper object,.fluid-width-video-wrapper embed {position:absolute;top:0;left:0;width:100%;height:100%;}</style></div><script type="text/javascript" src="./パーリンノイズを理解する _ プログラミング _ POSTD_files/bc93b7ae58"></script><script src="./パーリンノイズを理解する _ プログラミング _ POSTD_files/nr-1071.min.js"></script><script src="./パーリンノイズを理解する _ プログラミング _ POSTD_files/cb=gapi.loaded_1" async=""></script><script src="./パーリンノイズを理解する _ プログラミング _ POSTD_files/cb=gapi(1).loaded_0" async=""></script><script async="" src="./パーリンノイズを理解する _ プログラミング _ POSTD_files/analytics.js"></script><script type="text/javascript">window.NREUM||(NREUM={}),__nr_require=function(e,t,n){function r(n){if(!t[n]){var o=t[n]={exports:{}};e[n][0].call(o.exports,function(t){var o=e[n][1][t];return r(o||t)},o,o.exports)}return t[n].exports}if("function"==typeof __nr_require)return __nr_require;for(var o=0;o<n.length;o++)r(n[o]);return r}({1:[function(e,t,n){function r(){}function o(e,t,n){return function(){return i(e,[f.now()].concat(u(arguments)),t?null:this,n),t?void 0:this}}var i=e("handle"),a=e(2),u=e(3),c=e("ee").get("tracer"),f=e("loader"),s=NREUM;"undefined"==typeof window.newrelic&&(newrelic=s);var p=["setPageViewName","setCustomAttribute","setErrorHandler","finished","addToTrace","inlineHit","addRelease"],d="api-",l=d+"ixn-";a(p,function(e,t){s[t]=o(d+t,!0,"api")}),s.addPageAction=o(d+"addPageAction",!0),s.setCurrentRouteName=o(d+"routeName",!0),t.exports=newrelic,s.interaction=function(){return(new r).get()};var m=r.prototype={createTracer:function(e,t){var n={},r=this,o="function"==typeof t;return i(l+"tracer",[f.now(),e,n],r),function(){if(c.emit((o?"":"no-")+"fn-start",[f.now(),r,o],n),o)try{return t.apply(this,arguments)}catch(e){throw c.emit("fn-err",[arguments,this,e],n),e}finally{c.emit("fn-end",[f.now()],n)}}}};a("setName,setAttribute,save,ignore,onEnd,getContext,end,get".split(","),function(e,t){m[t]=o(l+t)}),newrelic.noticeError=function(e){"string"==typeof e&&(e=new Error(e)),i("err",[e,f.now()])}},{}],2:[function(e,t,n){function r(e,t){var n=[],r="",i=0;for(r in e)o.call(e,r)&&(n[i]=t(r,e[r]),i+=1);return n}var o=Object.prototype.hasOwnProperty;t.exports=r},{}],3:[function(e,t,n){function r(e,t,n){t||(t=0),"undefined"==typeof n&&(n=e?e.length:0);for(var r=-1,o=n-t||0,i=Array(o<0?0:o);++r<o;)i[r]=e[t+r];return i}t.exports=r},{}],4:[function(e,t,n){t.exports={exists:"undefined"!=typeof window.performance&&window.performance.timing&&"undefined"!=typeof window.performance.timing.navigationStart}},{}],ee:[function(e,t,n){function r(){}function o(e){function t(e){return e&&e instanceof r?e:e?c(e,u,i):i()}function n(n,r,o,i){if(!d.aborted||i){e&&e(n,r,o);for(var a=t(o),u=m(n),c=u.length,f=0;f<c;f++)u[f].apply(a,r);var p=s[y[n]];return p&&p.push([b,n,r,a]),a}}function l(e,t){v[e]=m(e).concat(t)}function m(e){return v[e]||[]}function w(e){return p[e]=p[e]||o(n)}function g(e,t){f(e,function(e,n){t=t||"feature",y[n]=t,t in s||(s[t]=[])})}var v={},y={},b={on:l,emit:n,get:w,listeners:m,context:t,buffer:g,abort:a,aborted:!1};return b}function i(){return new r}function a(){(s.api||s.feature)&&(d.aborted=!0,s=d.backlog={})}var u="nr@context",c=e("gos"),f=e(2),s={},p={},d=t.exports=o();d.backlog=s},{}],gos:[function(e,t,n){function r(e,t,n){if(o.call(e,t))return e[t];var r=n();if(Object.defineProperty&&Object.keys)try{return Object.defineProperty(e,t,{value:r,writable:!0,enumerable:!1}),r}catch(i){}return e[t]=r,r}var o=Object.prototype.hasOwnProperty;t.exports=r},{}],handle:[function(e,t,n){function r(e,t,n,r){o.buffer([e],r),o.emit(e,t,n)}var o=e("ee").get("handle");t.exports=r,r.ee=o},{}],id:[function(e,t,n){function r(e){var t=typeof e;return!e||"object"!==t&&"function"!==t?-1:e===window?0:a(e,i,function(){return o++})}var o=1,i="nr@id",a=e("gos");t.exports=r},{}],loader:[function(e,t,n){function r(){if(!x++){var e=h.info=NREUM.info,t=d.getElementsByTagName("script")[0];if(setTimeout(s.abort,3e4),!(e&&e.licenseKey&&e.applicationID&&t))return s.abort();f(y,function(t,n){e[t]||(e[t]=n)}),c("mark",["onload",a()+h.offset],null,"api");var n=d.createElement("script");n.src="https://"+e.agent,t.parentNode.insertBefore(n,t)}}function o(){"complete"===d.readyState&&i()}function i(){c("mark",["domContent",a()+h.offset],null,"api")}function a(){return E.exists&&performance.now?Math.round(performance.now()):(u=Math.max((new Date).getTime(),u))-h.offset}var u=(new Date).getTime(),c=e("handle"),f=e(2),s=e("ee"),p=window,d=p.document,l="addEventListener",m="attachEvent",w=p.XMLHttpRequest,g=w&&w.prototype;NREUM.o={ST:setTimeout,SI:p.setImmediate,CT:clearTimeout,XHR:w,REQ:p.Request,EV:p.Event,PR:p.Promise,MO:p.MutationObserver};var v=""+location,y={beacon:"bam.nr-data.net",errorBeacon:"bam.nr-data.net",agent:"js-agent.newrelic.com/nr-1071.min.js"},b=w&&g&&g[l]&&!/CriOS/.test(navigator.userAgent),h=t.exports={offset:u,now:a,origin:v,features:{},xhrWrappable:b};e(1),d[l]?(d[l]("DOMContentLoaded",i,!1),p[l]("load",r,!1)):(d[m]("onreadystatechange",o),p[m]("onload",r)),c("mark",["firstbyte",u],null,"api");var x=0,E=e(4)},{}]},{},["loader"]);</script>
	<meta name="viewport" content="width=device-width">
	<title>パーリンノイズを理解する | プログラミング | POSTD</title>
	<link rel="profile" href="http://gmpg.org/xfn/11">
	<link rel="pingback" href="http://postd.cc/wp/xmlrpc.php">
	<link rel="shortcut icon" type="image/ico" href="http://postd.cc/favicon.ico">

	<meta name="msapplication-TileColor" content="#ffffff">
	<meta name="msapplication-TileImage" content="/app-icon.png">
	<meta name="apple-mobile-web-app-title" content="POSTD">
	<link rel="apple-touch-icon-precomposed" href="http://postd.cc/app-icon.png">
	<link rel="alternate" type="application/rss+xml" title="RSS" href="http://postd.cc/feed/">

	<link rel="stylesheet" type="text/css" href="./パーリンノイズを理解する _ プログラミング _ POSTD_files/postd.css" media="all">
	<link rel="stylesheet" id="publisher-fontawesome-css-css" href="./パーリンノイズを理解する _ プログラミング _ POSTD_files/font-awesome.min.css" type="text/css" media="all">

	<script id="facebook-jssdk" src="./パーリンノイズを理解する _ プログラミング _ POSTD_files/sdk.js" async=""></script>
	<script id="twitter-wjs" src="./パーリンノイズを理解する _ プログラミング _ POSTD_files/widgets.js" async=""></script>
	<script src="./パーリンノイズを理解する _ プログラミング _ POSTD_files/bookmark_button.js" async=""></script>
	<script src="./パーリンノイズを理解する _ プログラミング _ POSTD_files/platform.js" async="" gapi_processed="true"></script>
	<script type="text/javascript">window.___gcfg = {lang: 'ja'};</script>
	<script id="pocket-btn-js" src="./パーリンノイズを理解する _ プログラミング _ POSTD_files/btn.js" async=""></script>


<!-- All in One SEO Pack 2.2.7 by Michael Torbert of Semper Fi Web Design[206,239] -->
<meta name="description" itemprop="description" content="この記事の目的はKen">

<meta name="keywords" itemprop="keywords" content="java,アルゴリズム,プログラミング">

<link rel="canonical" href="http://postd.cc/understanding-perlin-noise/">
<meta property="og:title" content="パーリンノイズを理解する | プログラミング | POSTD">
<meta property="og:type" content="article">
<meta property="og:url" content="http://postd.cc/understanding-perlin-noise/">
<meta property="og:image" content="http://postd.cc/wp/wp-content/uploads/2015/02/use3d.png">
<meta property="og:site_name" content="POSTD">
<meta property="fb:admins" content="100001033893125">
<meta property="og:description" content="この記事の目的はKen Perlinの(http://mrl.nyu.edu/~perlin/noise/)を分かりやすく分析し、お伝えすることです。記事内のコードはC#で書かれており、自由にご利用いただけます。最終形のみを見たい方は、(https://gist.github.com/Flafla2/f0260a861be0ebdeef76)。 パーリンノイズは手続き的なコンテンツ生成によく使われる、非常に強力なアルゴリズムです。ゲームや、映画などの視覚媒体に特に有用です。パーリンノイズの開発者であるKen Perlinは、(http://mrl.nyu.edu/~perlin/doc/oscar.html)。彼が2002年に発表した(http://mrl.nyu.edu/~perlin/noise/)について、私はこの記事で掘り下げていきます。パーリンノイズは、ゲーム開発においては、波形の類や、起伏のある素材、テクスチャなどに有用です。例えば手続き型の地形（Minecraftのような地形はパーリンノイズで生成できます）、炎のエフェクト、水、雲などにも使えます。これらのエフェクトのほとんどが2次元、3次元で使用するパーリンノイズを代表するものですが、このノイズはもちろん4次元にも使用可能です。さらに、パーリンノイズは（*テラリア*や*Starbound*などに使われている）横スクロールの地形や、手書き線のような画像描写にも使用できます。 また、パーリンノイズを拡張して、時間という新たな次元も表現できます。例えば、2次元のパーリンノイズは地形生成として機能しますが、同様のノイズが3次元では海のうねる波として解釈されます。以下は次元ごとのノイズと実行結果を表にしたものです。   ノイズ次元 Raｗノイズ（グレースケール） ユースケース   1  手書き風ラインを作成するためにノイズをオフセットとして使用   2  単純な勾配を設定すると炎のような手続き型テクスチャが生成される   3  パーリンノイズの実装を修正して描画される洞窟の地形は、おそらく今日における典型的な使用法だろう   ご覧の通り、パーリンノイズは自然発生する多くの現象に対して適用できます。ではパーリンノイズのアルゴリズムを数学的および論理的に見ていきましょう。 ##論理的概要">
<meta property="article:tag" content="java">
<meta property="article:tag" content="アルゴリズム">
<meta property="article:tag" content="プログラミング">
<meta property="article:publisher" content="https://www.facebook.com/postdcc">
<meta property="article:published_time" content="2015-02-17T12:00:51Z">
<meta property="article:modified_time" content="2015-05-04T17:31:13Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:site" content="@POSTDcc">
<meta name="twitter:domain" content="postd.cc">
<meta name="twitter:description" content="この記事の目的はKen Perlinの(http://mrl.nyu.edu/~perlin/noise/)を分かりやすく分析し、お伝えすることです。記事内のコードはC#で書かれており、自由にご利用いただけます。最終形のみを見たい方は、(https://gist.github.com/Flafla2/f0260a861be0ebdeef76)。 パーリンノイズは手続き的なコンテンツ生成によく使われる、非常に強力なアルゴリズムです。ゲームや、映画などの視覚媒体に特に有用です。パーリンノイズの開発者であるKen Perlinは、(http://mrl.nyu.edu/~perlin/doc/oscar.html)。彼が2002年に発表した(http://mrl.nyu.edu/~perlin/noise/)について、私はこの記事で掘り下げていきます。パーリンノイズは、ゲーム開発においては、波形の類や、起伏のある素材、テクスチャなどに有用です。例えば手続き型の地形（Minecraftのような地形はパーリンノイズで生成できます）、炎のエフェクト、水、雲などにも使えます。これらのエフェクトのほとんどが2次元、3次元で使用するパーリンノイズを代表するものですが、このノイズはもちろん4次元にも使用可能です。さらに、パーリンノイズは（*テラリア*や*Starbound*などに使われている）横スクロールの地形や、手書き線のような画像描写にも使用できます。 また、パーリンノイズを拡張して、時間という新たな次元も表現できます。例えば、2次元のパーリンノイズは地形生成として機能しますが、同様のノイズが3次元では海のうねる波として解釈されます。以下は次元ごとのノイズと実行結果を表にしたものです。   ノイズ次元 Raｗノイズ（グレースケール） ユースケース   1  手書き風ラインを作成するためにノイズをオフセットとして使用   2  単純な勾配を設定すると炎のような手続き型テクスチャが生成される   3  パーリンノイズの実装を修正して描画される洞窟の地形は、おそらく今日における典型的な使用法だろう   ご覧の通り、パーリンノイズは自然発生する多くの現象に対して適用できます。ではパーリンノイズのアルゴリズムを数学的および論理的に見ていきましょう。 ##論理的概要">
<meta itemprop="image" content="http://postd.cc/wp/wp-content/uploads/2015/02/use3d.png">
<!-- /all in one seo pack -->
		<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"http:\/\/s.w.org\/images\/core\/emoji\/72x72\/","ext":".png","source":{"concatemoji":"http:\/\/postd.cc\/wp\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.2.19"}};
			!function(a,b,c){function d(a){var c=b.createElement("canvas"),d=c.getContext&&c.getContext("2d");return d&&d.fillText?(d.textBaseline="top",d.font="600 32px Arial","flag"===a?(d.fillText(String.fromCharCode(55356,56812,55356,56807),0,0),c.toDataURL().length>3e3):(d.fillText(String.fromCharCode(55357,56835),0,0),0!==d.getImageData(16,16,1,1).data[0])):!1}function e(a){var c=b.createElement("script");c.src=a,c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g;c.supports={simple:d("simple"),flag:d("flag")},c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.simple&&c.supports.flag||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);
		</script>
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
<style type="text/css">
.powerpress_player .wp-audio-shortcode { max-width: 50%; }
</style>
<link rel="stylesheet" id="contact-form-7-css" href="./パーリンノイズを理解する _ プログラミング _ POSTD_files/styles.css" type="text/css" media="all">
<link rel="stylesheet" id="videojs-plugin-css" href="./パーリンノイズを理解する _ プログラミング _ POSTD_files/plugin-styles.css" type="text/css" media="all">
<link rel="stylesheet" id="videojs-css" href="./パーリンノイズを理解する _ プログラミング _ POSTD_files/video-js.css" type="text/css" media="all">
<link rel="stylesheet" id="wp-gfm-css" href="./パーリンノイズを理解する _ プログラミング _ POSTD_files/markdown.css" type="text/css" media="all">
<script type="text/javascript" src="./パーリンノイズを理解する _ プログラミング _ POSTD_files/jquery.js"></script>
<script type="text/javascript" src="./パーリンノイズを理解する _ プログラミング _ POSTD_files/jquery-migrate.min.js"></script>
<link rel="prev" title="Travis CIでコンテナベースのインフラストラクチャとDockerでより高速なビルドを" href="http://postd.cc/faster-builds-with-container-based-infrastructure/">
<link rel="next" title="現実世界のSwift ー Duolingo開発者が語るSwiftの強みと弱み" href="http://postd.cc/real-world-swift/">
<script type="text/javascript"><!--
function powerpress_pinw(pinw_url){window.open(pinw_url, 'PowerPressPlayer','toolbar=0,status=0,resizable=1,width=460,height=320');	return false;}
//-->
</script>

		<script type="text/javascript"> document.createElement("video");document.createElement("audio");document.createElement("track"); </script>
		
	
	<script>
	  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
	  ga('create', 'UA-51956695-1', 'postd.cc');
	  ga('send', 'pageview');
	</script>

	<!--[if lt IE 9]>
	<link rel="stylesheet" type="text/css" href="http://postd.cc/wp/wp-content/themes/publisher-custom/assets/css/postd.ie.css?ver=1.0.2" media="all" />
	<script type="text/javascript" src="http://postd.cc/wp/wp-content/themes/publisher-custom/assets/js/html5shiv.js" charset="utf-8"></script>
	<![endif]-->
<script type="text/javascript" charset="utf-8" async="" src="./パーリンノイズを理解する _ プログラミング _ POSTD_files/button.df1da1fef194d8f8f3fd803a219a8177.js"></script><style type="text/css">.fb_hidden{position:absolute;top:-10000px;z-index:10001}.fb_reposition{overflow:hidden;position:relative}.fb_invisible{display:none}.fb_reset{background:none;border:0;border-spacing:0;color:#000;cursor:auto;direction:ltr;font-family:"lucida grande", tahoma, verdana, arial, "hiragino kaku gothic pro",meiryo,"ms pgothic",sans-serif;font-size:11px;font-style:normal;font-variant:normal;font-weight:normal;letter-spacing:normal;line-height:1;margin:0;overflow:visible;padding:0;text-align:left;text-decoration:none;text-indent:0;text-shadow:none;text-transform:none;visibility:visible;white-space:normal;word-spacing:normal}.fb_reset>div{overflow:hidden}.fb_link img{border:none}@keyframes fb_transform{from{opacity:0;transform:scale(.95)}to{opacity:1;transform:scale(1)}}.fb_animate{animation:fb_transform .3s forwards}
.fb_dialog{background:rgba(82, 82, 82, .7);position:absolute;top:-10000px;z-index:10001}.fb_reset .fb_dialog_legacy{overflow:visible}.fb_dialog_advanced{padding:10px;-moz-border-radius:8px;-webkit-border-radius:8px;border-radius:8px}.fb_dialog_content{background:#fff;color:#333}.fb_dialog_close_icon{background:url(https://static.xx.fbcdn.net/rsrc.php/v3/yq/r/IE9JII6Z1Ys.png) no-repeat scroll 0 0 transparent;cursor:pointer;display:block;height:15px;position:absolute;right:18px;top:17px;width:15px}.fb_dialog_mobile .fb_dialog_close_icon{top:5px;left:5px;right:auto}.fb_dialog_padding{background-color:transparent;position:absolute;width:1px;z-index:-1}.fb_dialog_close_icon:hover{background:url(https://static.xx.fbcdn.net/rsrc.php/v3/yq/r/IE9JII6Z1Ys.png) no-repeat scroll 0 -15px transparent}.fb_dialog_close_icon:active{background:url(https://static.xx.fbcdn.net/rsrc.php/v3/yq/r/IE9JII6Z1Ys.png) no-repeat scroll 0 -30px transparent}.fb_dialog_loader{background-color:#f6f7f9;border:1px solid #606060;font-size:24px;padding:20px}.fb_dialog_top_left,.fb_dialog_top_right,.fb_dialog_bottom_left,.fb_dialog_bottom_right{height:10px;width:10px;overflow:hidden;position:absolute}.fb_dialog_top_left{background:url(https://static.xx.fbcdn.net/rsrc.php/v3/ye/r/8YeTNIlTZjm.png) no-repeat 0 0;left:-10px;top:-10px}.fb_dialog_top_right{background:url(https://static.xx.fbcdn.net/rsrc.php/v3/ye/r/8YeTNIlTZjm.png) no-repeat 0 -10px;right:-10px;top:-10px}.fb_dialog_bottom_left{background:url(https://static.xx.fbcdn.net/rsrc.php/v3/ye/r/8YeTNIlTZjm.png) no-repeat 0 -20px;bottom:-10px;left:-10px}.fb_dialog_bottom_right{background:url(https://static.xx.fbcdn.net/rsrc.php/v3/ye/r/8YeTNIlTZjm.png) no-repeat 0 -30px;right:-10px;bottom:-10px}.fb_dialog_vert_left,.fb_dialog_vert_right,.fb_dialog_horiz_top,.fb_dialog_horiz_bottom{position:absolute;background:#525252;filter:alpha(opacity=70);opacity:.7}.fb_dialog_vert_left,.fb_dialog_vert_right{width:10px;height:100%}.fb_dialog_vert_left{margin-left:-10px}.fb_dialog_vert_right{right:0;margin-right:-10px}.fb_dialog_horiz_top,.fb_dialog_horiz_bottom{width:100%;height:10px}.fb_dialog_horiz_top{margin-top:-10px}.fb_dialog_horiz_bottom{bottom:0;margin-bottom:-10px}.fb_dialog_iframe{line-height:0}.fb_dialog_content .dialog_title{background:#6d84b4;border:1px solid #365899;color:#fff;font-size:14px;font-weight:bold;margin:0}.fb_dialog_content .dialog_title>span{background:url(https://static.xx.fbcdn.net/rsrc.php/v3/yd/r/Cou7n-nqK52.gif) no-repeat 5px 50%;float:left;padding:5px 0 7px 26px}body.fb_hidden{-webkit-transform:none;height:100%;margin:0;overflow:visible;position:absolute;top:-10000px;left:0;width:100%}.fb_dialog.fb_dialog_mobile.loading{background:url(https://static.xx.fbcdn.net/rsrc.php/v3/ya/r/3rhSv5V8j3o.gif) white no-repeat 50% 50%;min-height:100%;min-width:100%;overflow:hidden;position:absolute;top:0;z-index:10001}.fb_dialog.fb_dialog_mobile.loading.centered{width:auto;height:auto;min-height:initial;min-width:initial;background:none}.fb_dialog.fb_dialog_mobile.loading.centered #fb_dialog_loader_spinner{width:100%}.fb_dialog.fb_dialog_mobile.loading.centered .fb_dialog_content{background:none}.loading.centered #fb_dialog_loader_close{color:#fff;display:block;padding-top:20px;clear:both;font-size:18px}#fb-root #fb_dialog_ipad_overlay{background:rgba(0, 0, 0, .45);position:absolute;bottom:0;left:0;right:0;top:0;width:100%;min-height:100%;z-index:10000}#fb-root #fb_dialog_ipad_overlay.hidden{display:none}.fb_dialog.fb_dialog_mobile.loading iframe{visibility:hidden}.fb_dialog_content .dialog_header{-webkit-box-shadow:white 0 1px 1px -1px inset;background:-webkit-gradient(linear, 0% 0%, 0% 100%, from(#738ABA), to(#2C4987));border-bottom:1px solid;border-color:#1d4088;color:#fff;font:14px Helvetica, sans-serif;font-weight:bold;text-overflow:ellipsis;text-shadow:rgba(0, 30, 84, .296875) 0 -1px 0;vertical-align:middle;white-space:nowrap}.fb_dialog_content .dialog_header table{-webkit-font-smoothing:subpixel-antialiased;height:43px;width:100%}.fb_dialog_content .dialog_header td.header_left{font-size:12px;padding-left:5px;vertical-align:middle;width:60px}.fb_dialog_content .dialog_header td.header_right{font-size:12px;padding-right:5px;vertical-align:middle;width:60px}.fb_dialog_content .touchable_button{background:-webkit-gradient(linear, 0% 0%, 0% 100%, from(#4966A6), color-stop(.5, #355492), to(#2A4887));border:1px solid #29487d;-webkit-background-clip:padding-box;-webkit-border-radius:3px;-webkit-box-shadow:rgba(0, 0, 0, .117188) 0 1px 1px inset, rgba(255, 255, 255, .167969) 0 1px 0;display:inline-block;margin-top:3px;max-width:85px;line-height:18px;padding:4px 12px;position:relative}.fb_dialog_content .dialog_header .touchable_button input{border:none;background:none;color:#fff;font:12px Helvetica, sans-serif;font-weight:bold;margin:2px -12px;padding:2px 6px 3px 6px;text-shadow:rgba(0, 30, 84, .296875) 0 -1px 0}.fb_dialog_content .dialog_header .header_center{color:#fff;font-size:16px;font-weight:bold;line-height:18px;text-align:center;vertical-align:middle}.fb_dialog_content .dialog_content{background:url(https://static.xx.fbcdn.net/rsrc.php/v3/y9/r/jKEcVPZFk-2.gif) no-repeat 50% 50%;border:1px solid #555;border-bottom:0;border-top:0;height:150px}.fb_dialog_content .dialog_footer{background:#f6f7f9;border:1px solid #555;border-top-color:#ccc;height:40px}#fb_dialog_loader_close{float:left}.fb_dialog.fb_dialog_mobile .fb_dialog_close_button{text-shadow:rgba(0, 30, 84, .296875) 0 -1px 0}.fb_dialog.fb_dialog_mobile .fb_dialog_close_icon{visibility:hidden}#fb_dialog_loader_spinner{animation:rotateSpinner 1.2s linear infinite;background-color:transparent;background-image:url(https://static.xx.fbcdn.net/rsrc.php/v3/yD/r/t-wz8gw1xG1.png);background-repeat:no-repeat;background-position:50% 50%;height:24px;width:24px}@keyframes rotateSpinner{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}
.fb_iframe_widget{display:inline-block;position:relative}.fb_iframe_widget span{display:inline-block;position:relative;text-align:justify}.fb_iframe_widget iframe{position:absolute}.fb_iframe_widget_fluid_desktop,.fb_iframe_widget_fluid_desktop span,.fb_iframe_widget_fluid_desktop iframe{max-width:100%}.fb_iframe_widget_fluid_desktop iframe{min-width:220px;position:relative}.fb_iframe_widget_lift{z-index:1}.fb_hide_iframes iframe{position:relative;left:-10000px}.fb_iframe_widget_loader{position:relative;display:inline-block}.fb_iframe_widget_fluid{display:inline}.fb_iframe_widget_fluid span{width:100%}.fb_iframe_widget_loader iframe{min-height:32px;z-index:2;zoom:1}.fb_iframe_widget_loader .FB_Loader{background:url(https://static.xx.fbcdn.net/rsrc.php/v3/y9/r/jKEcVPZFk-2.gif) no-repeat;height:32px;width:32px;margin-left:-16px;position:absolute;left:50%;z-index:4}
.fb_invisible_flow{display:inherit;height:0;overflow-x:hidden;width:0}.fb_mobile_overlay_active{height:100%;overflow:hidden;position:fixed;width:100%}.fb_shrink_active{opacity:1;transform:scale(1, 1);transition-duration:200ms;transition-timing-function:ease-out}.fb_shrink_active:active{opacity:.5;transform:scale(.75, .75)}</style></head>

<body class="single single-post postid-2354 single-format-standard">
<div id="fb-root" class=" fb_reset"><div style="position: absolute; top: -10000px; height: 0px; width: 0px;"><div><iframe name="fb_xdm_frame_http" frameborder="0" allowtransparency="true" allowfullscreen="true" scrolling="no" id="fb_xdm_frame_http" aria-hidden="true" title="Facebook Cross Domain Communication Frame" tabindex="-1" src="./パーリンノイズを理解する _ プログラミング _ POSTD_files/lY4eZXm_YWu.html" style="border: none;"></iframe><iframe name="fb_xdm_frame_https" frameborder="0" allowtransparency="true" allowfullscreen="true" scrolling="no" id="fb_xdm_frame_https" aria-hidden="true" title="Facebook Cross Domain Communication Frame" tabindex="-1" src="./パーリンノイズを理解する _ プログラミング _ POSTD_files/lY4eZXm_YWu(1).html" style="border: none;"></iframe></div></div><div style="position: absolute; top: -10000px; height: 0px; width: 0px;"><div></div></div></div>

<div id="page">
	<div class="navigation-wrap clearfix">
		<div class="navigation-wrap-inside clearfix">
			<nav role="navigation" class="site-navigation main-navigation">
				<div class="assistive-text site-navigation-menu"><i class="fa fa-bars"></i> Menu</div>
				<div class="assistive-text skip-link"><a href="http://postd.cc/understanding-perlin-noise/#content">Skip to content</a></div>
				<div class="menu-menu-container"><ul id="menu-menu" class="menu"><li id="menu-item-94" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children menu-item-94"><a href="http://postd.cc/about/">About</a>
<ul class="sub-menu">
	<li id="menu-item-104" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-104"><a href="http://postd.cc/about/">POSTDについて</a></li>
	<li id="menu-item-103" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-103"><a href="http://postd.cc/about/terms/">利用規約</a></li>
	<li id="menu-item-102" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-102"><a href="http://postd.cc/about/contact/">お問い合わせ</a></li>
</ul>
</li>
<li id="menu-item-93" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children menu-item-93"><a href="http://postd.cc/">Category</a>
<ul class="sub-menu">
	<li id="menu-item-3723" class="menu-item menu-item-type-taxonomy menu-item-object-category current-post-ancestor current-menu-parent current-post-parent menu-item-3723"><a href="http://postd.cc/category/programming/">プログラミング</a></li>
	<li id="menu-item-3726" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3726"><a href="http://postd.cc/category/infrastructure/">インフラ・ミドルウェア</a></li>
	<li id="menu-item-3724" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3724"><a href="http://postd.cc/category/system-development/">開発手法・プロジェクト管理</a></li>
	<li id="menu-item-3727" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3727"><a href="http://postd.cc/category/careers/">キャリア・働き方</a></li>
	<li id="menu-item-3730" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3730"><a href="http://postd.cc/category/computer-science/">コンピュータサイエンス</a></li>
	<li id="menu-item-3725" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3725"><a href="http://postd.cc/category/startups/">スタートアップ</a></li>
	<li id="menu-item-3728" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3728"><a href="http://postd.cc/category/design/">デザイン</a></li>
	<li id="menu-item-3729" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3729"><a href="http://postd.cc/category/products/">プロダクト・サービス</a></li>
</ul>
</li>
</ul></div>			</nav><!-- .site-navigation .main-navigation -->

			<!-- Grab header icons template -->
			
			<div class="header-search">
				<ul class="toggle-icons">
					<li><a class="toggle-search current" href="http://postd.cc/understanding-perlin-noise/#" title="検索">検索</a></li>
				</ul>

				<div class="toggle-boxes">
											<div class="toggle-box toggle-box-social">
							<div class="icons">
								<div class="icons-widget">
									<div class="icon-links">
																					<a href="https://twitter.com/POSTDcc" class="twitter-icon ext-link" title="Twitter" rel="nofollow"><i class="fa fa-twitter-square"></i></a>
										
																					<a href="https://www.facebook.com/postdcc" class="facebook-icon ext-link" title="Facebook" rel="nofollow"><i class="fa fa-facebook-square"></i></a>
										
										
										
										
										
										
										
										
										
										
																					<a href="http://postd.cc/feed/" class="feed-icon" title="RSS"><i class="fa fa-rss-square"></i></a>
										
																			</div><!-- .icon-links -->
								</div><!-- .icons-widget -->
							</div><!-- .icons -->
						</div><!-- .toggle-box -->
					
					<div class="toggle-box toggle-box-search">
						<form method="get" action="http://postd.cc/" role="search">
							<label for="header-search-submit" class="assistive-text">Search</label>
							<input type="text" class="field" name="s" value="" placeholder="Type here and press enter.">
						</form>
					</div><!-- .toggle-box -->

				</div><!-- .toggle-boxes -->
			</div><!-- .header-search -->		</div><!-- .navigation-wrap-inside -->
	</div><!-- .navigation-wrap -->

	<header id="masthead" class="site-header" role="banner">

		<div class="header-wrap">
			<div class="hgroup">
				<div class="logo-image">
					<a href="http://postd.cc/" class="animated a-alpha flipInY">
						<img src="./パーリンノイズを理解する _ プログラミング _ POSTD_files/postd_logo@2x.png" srcset="http://postd.cc/wp/wp-content/themes/publisher-custom/images/postd_logo.png 1x, http://postd.cc/wp/wp-content/themes/publisher-custom/images/postd_logo@2x.png 1.5x" alt="POSTD" width="200" height="90" class="transition">
												<p class="site-title">POSTD</p>
											</a>
				</div>

								<p class="site-description animated fadeIn">プログラミングするエンジニアに向けたトレンドメディア</p>
				
			</div>
		</div><!-- .header-wrap -->
	</header><!-- #masthead .site-header -->


						<aside class="block-subscribe">
							<div class="block-subscribe-inner">
								<p>POSTDから最新エントリを受け取る</p>
								<ul>
									<li class="twitter">
										<iframe id="twitter-widget-0" scrolling="no" frameborder="0" allowtransparency="true" class="twitter-follow-button twitter-follow-button-rendered" title="Twitter Follow Button" src="./パーリンノイズを理解する _ プログラミング _ POSTD_files/follow_button.83d5793f6ebbe2046330abda6016ae93.ja.html" style="position: static; visibility: visible; width: 97px; height: 20px;" data-screen-name="POSTDcc"></iframe>
									</li>
									<li class="facebook">
										<div class="fb-like fb_iframe_widget" data-href="https://www.facebook.com/postdcc" data-layout="button" data-action="like" data-show-faces="false" data-share="false" fb-xfbml-state="rendered" fb-iframe-plugin-query="action=like&amp;app_id=1442963845953594&amp;container_width=82&amp;href=https%3A%2F%2Fwww.facebook.com%2Fpostdcc&amp;layout=button&amp;locale=ja_JP&amp;sdk=joey&amp;share=false&amp;show_faces=false"><span style="vertical-align: bottom; width: 72px; height: 20px;"><iframe name="f31ab09b7600fb" width="1000px" height="1000px" frameborder="0" allowtransparency="true" allowfullscreen="true" scrolling="no" title="fb:like Facebook Social Plugin" src="./パーリンノイズを理解する _ プログラミング _ POSTD_files/like.html" style="border: none; visibility: visible; width: 72px; height: 20px;" class=""></iframe></span></div>
									</li>
									<li class="feedly">
										<a href="http://cloud.feedly.com/#subscription%2Ffeed%2Fhttp%3A%2F%2Fpostd.cc%2Ffeed%2F" target="_blank" class="track-me" data-ga-category="social" data-ga-action="click" data-ga-label="feedly"><img src="./パーリンノイズを理解する _ プログラミング _ POSTD_files/feedly-follow-rectangle-volume-small_2x.png" alt="follow us in feedly" width="66" height="20"></a>
									</li>
								</ul>
							</div>
						</aside>
		<div id="main" class="site-main clearfix">
			<div id="primary">

				<article id="content" class="site-content container clearfix" role="main">

											
						<!-- Get post format -->
						
<div class="block-standard post-2354 post type-post status-publish format-standard has-post-thumbnail category-programming tag-java tag-algorithm">
	    	

	
<div class="block-titles-wrap" itemscope="" itemtype="http://schema.org/BlogPosting">
	<div class="block-titles">

		<div class="block-date" itemprop="datePublished">2015年2月17日</div>

		
							<div class="block-entry-tags clearfix">
					<div class="tagcloud" itemprop="keywords"><a href="http://postd.cc/tag/java/" rel="tag">Java</a><a href="http://postd.cc/tag/algorithm/" rel="tag">アルゴリズム</a></div>
				</div>
			
			<h1 class="block-entry-title" itemprop="name">パーリンノイズを理解する</h1>

		
	</div><!-- .block-titles -->

	<div class="block-text">
		
			<!-- social -->
 			<div class="block-social">
				<ul>
					<li class="block-social-hatena">
					<iframe class="hatena-bookmark-button-frame" title="このエントリーをはてなブックマークに追加" frameborder="0" scrolling="no" width="84" height="40" src="javascript:false" style="width: 84px; height: 40px;" src="./パーリンノイズを理解する _ プログラミング _ POSTD_files/saved_resource.html"></iframe>
					</li>
					<li class="block-social-facebook">
						<div class="fb-like fb_iframe_widget" data-layout="box_count" data-action="like" data-show-faces="false" data-share="false" fb-xfbml-state="rendered" fb-iframe-plugin-query="action=like&amp;app_id=1442963845953594&amp;container_width=0&amp;href=http%3A%2F%2Fpostd.cc%2Funderstanding-perlin-noise%2F&amp;layout=box_count&amp;locale=ja_JP&amp;sdk=joey&amp;share=false&amp;show_faces=false"><span style="vertical-align: bottom; width: 72px; height: 40px;"><iframe name="f34b171df6fea9" width="1000px" height="1000px" frameborder="0" allowtransparency="true" allowfullscreen="true" scrolling="no" title="fb:like Facebook Social Plugin" src="./パーリンノイズを理解する _ プログラミング _ POSTD_files/like(1).html" style="border: none; visibility: visible; width: 72px; height: 40px;" class=""></iframe></span></div>
					</li>
					<li class="block-social-twitter">
						<iframe id="twitter-widget-2" scrolling="no" frameborder="0" allowtransparency="true" class="twitter-share-button twitter-share-button-rendered twitter-tweet-button" title="Twitter Tweet Button" src="./パーリンノイズを理解する _ プログラミング _ POSTD_files/tweet_button.83d5793f6ebbe2046330abda6016ae93.ja.html" style="position: static; visibility: visible; width: 75px; height: 20px;"></iframe>
					</li>
					<li class="block-social-pocket">
					<div class="pocket-btn"><iframe width="60" height="63" id="pocket-button-0" frameborder="0" allowtransparency="true" scrolling="NO" src="./パーリンノイズを理解する _ プログラミング _ POSTD_files/button.html"></iframe></div>
					</li>
					<li class="block-social-googleplus">
						<div id="___plusone_0" style="text-indent: 0px; margin: 0px; padding: 0px; background: transparent; border-style: none; float: none; line-height: normal; font-size: 1px; vertical-align: baseline; display: inline-block; width: 50px; height: 24px;"><iframe ng-non-bindable="" frameborder="0" hspace="0" marginheight="0" marginwidth="0" scrolling="no" style="position: static; top: 0px; width: 50px; margin: 0px; border-style: none; left: 0px; visibility: visible; height: 24px;" tabindex="0" vspace="0" width="100%" id="I0_1517279509285" name="I0_1517279509285" src="./パーリンノイズを理解する _ プログラミング _ POSTD_files/fastbutton.html" data-gapiattached="true" title="G+"></iframe></div>
					</li>
				</ul>
			</div>
 			<!-- // social -->

			<!-- post-meta -->
			<aside>
				<div class="post-meta">

					<!-- post-meta-original -->
											<div class="block-text-original clearfix">
							<div class="block-lineTitle"><span><em>Source</em></span></div>
							<div>
																	<div class="block-text-original-image">
										<img src="./パーリンノイズを理解する _ プログラミング _ POSTD_files/1498072-150x150.jpg">
									</div>
																<div class="block-text-original-text">
									<div class="markdown-content">
<p><a href="http://flafla2.github.io/2014/08/09/perlinnoise.html" rel="nofollow" title="" class="ext-link">Understanding Perlin Noise</a> （2014-08-09） by <a href="http://flafla2.github.io/" rel="nofollow" title="" class="ext-link">Adrian Biagioli</a></p>
</div>
								</div>
							</div>
						</div>
										<!-- //post-meta-original -->

					<!-- post-meta-product -->
										<!-- //post-meta-product -->

					<!-- post-meta-licence -->
											<div class="block-text-licence" itemprop="license">
							本記事は、原著者の許諾のもとに翻訳・掲載しております。						</div>
										<!-- //post-meta-licence -->
				</div>
			</aside>
			<!-- //post-meta -->


			<div class="block-text-content" itemprop="articleBody">

				<div class="markdown-content">
<p>この記事の目的はKen Perlinの<a href="http://mrl.nyu.edu/~perlin/noise/" rel="nofollow" title="" class="ext-link">改良パーリンノイズ</a>を分かりやすく分析し、お伝えすることです。記事内のコードはC#で書かれており、自由にご利用いただけます。最終形のみを見たい方は、<a href="https://gist.github.com/Flafla2/f0260a861be0ebdeef76" rel="nofollow" title="" class="ext-link">こちらから最終的なソースをご確認ください</a>。</p>
<p>パーリンノイズは手続き的なコンテンツ生成によく使われる、非常に強力なアルゴリズムです。ゲームや、映画などの視覚媒体に特に有用です。パーリンノイズの開発者であるKen Perlinは、<a href="http://mrl.nyu.edu/~perlin/doc/oscar.html" rel="nofollow" title="" class="ext-link">この最初の実装でアカデミー賞を受賞しました</a>。彼が2002年に発表した<a href="http://mrl.nyu.edu/~perlin/noise/" rel="nofollow" title="" class="ext-link">改良パーリンノイズ</a>について、私はこの記事で掘り下げていきます。パーリンノイズは、ゲーム開発においては、波形の類や、起伏のある素材、テクスチャなどに有用です。例えば手続き型の地形（Minecraftのような地形はパーリンノイズで生成できます）、炎のエフェクト、水、雲などにも使えます。これらのエフェクトのほとんどが2次元、3次元で使用するパーリンノイズを代表するものですが、このノイズはもちろん4次元にも使用可能です。さらに、パーリンノイズは（<em>テラリア</em>や<em>Starbound</em>などに使われている）横スクロールの地形や、手書き線のような画像描写にも使用できます。</p>
<p>また、パーリンノイズを拡張して、時間という新たな次元も表現できます。例えば、2次元のパーリンノイズは地形生成として機能しますが、同様のノイズが3次元では海のうねる波として解釈されます。以下は次元ごとのノイズと実行結果を表にしたものです。</p>
<table style="text-align: center">
<tbody>
<tr>
<th style="width: 10%">ノイズ次元</th>
<th style="width: 40%">Raｗノイズ（グレースケール）</th>
<th style="width: 50%">ユースケース</th>
</tr>
<tr>
<td>1</td>
<td><a href="./パーリンノイズを理解する _ プログラミング _ POSTD_files/raw1d.png"><img src="./パーリンノイズを理解する _ プログラミング _ POSTD_files/raw1d.png" alt="raw1d" width="200" height="103" class="alignnone size-full wp-image-2553"></a></td>
<td style="font-size: 0.7em"><img src="./パーリンノイズを理解する _ プログラミング _ POSTD_files/use1d.png" style="width: 100%; max-width: 150px;"><br>手書き風ラインを作成するためにノイズをオフセットとして使用</td>
</tr>
<tr>
<td>2</td>
<td><img src="./パーリンノイズを理解する _ プログラミング _ POSTD_files/raw2d.png" style="width: 100%; max-width: 150px;"></td>
<td style="font-size: 0.7em"><img src="./パーリンノイズを理解する _ プログラミング _ POSTD_files/use2d.png" style="width: 100%; max-width: 150px;"><br>単純な勾配を設定すると炎のような手続き型テクスチャが生成される</td>
</tr>
<tr>
<td>3</td>
<td><img src="./パーリンノイズを理解する _ プログラミング _ POSTD_files/raw3d.png" style="width: 100%; max-width: 150px;"></td>
<td style="font-size: 0.7em"><img src="./パーリンノイズを理解する _ プログラミング _ POSTD_files/use3d.png" style="width: 100%; max-width: 150px;"><br>パーリンノイズの実装を修正して描画される洞窟の地形は、おそらく今日における典型的な使用法だろう</td>
</tr>
</tbody>
</table>
<p>ご覧の通り、パーリンノイズは自然発生する多くの現象に対して適用できます。ではパーリンノイズのアルゴリズムを数学的および論理的に見ていきましょう。</p>
<h2 id="gfm-1">論理的概要</h2>
<p><em>注：この章は、<a href="http://webstaff.itn.liu.se/~stegu/TNM022-2005/perlinnoiselinks/perlin-noise-math-faq.html" rel="nofollow" title="" class="ext-link">Matt Zuckerによって書かれた素晴らしい記事</a>から多くを引用していることを先に述べさせていただきます。しかし、彼の記事は1980年代初めに書かれた最初のパーリンノイズのアルゴリズムを基にして書かれています。私の記事では2002年に書かれた改良パーリンノイズのアルゴリズムを扱います。従って、私のバージョンとZuckerのバージョンにはいくつか大きな違いがあります。</em></p>
<p>ではパーリンノイズの基本的な関数からはじめましょう。</p>
<pre class="prettyprint lang- linenums prettyprinted" title="" style=""><ol class="linenums"><li class="L0"><span class="kwd">public</span><span class="pln"> </span><span class="kwd">double</span><span class="pln"> perlin</span><span class="pun">(</span><span class="kwd">double</span><span class="pln"> x</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">double</span><span class="pln"> y</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">double</span><span class="pln"> z</span><span class="pun">);</span></li></ol></pre>
<p>入力としてx、y、zの座標を引数に取り、結果は0.0から1.0の間の<code>double</code>型で返されます。入力はどのように考えるのでしょうか？　まずx、y、zの座標を単位立方体に分割します。つまり立方体の中の座標の位置を見つけるには、<code>[x,y,z] % 1.0</code>を求めます。以下の図はこの概念を2次元で表現したものです。</p>
<p><a href="./パーリンノイズを理解する _ プログラミング _ POSTD_files/logic01-1.png"><img src="./パーリンノイズを理解する _ プログラミング _ POSTD_files/logic01-1.png" alt="logic01" width="148" height="138" class="alignnone size-full wp-image-2552"></a></p>
<p><em>図１：青い点は入力座標を示し、他の4つの点はそれを囲む整数の単位座標を表す</em> <a href="http://webstaff.itn.liu.se/~stegu/TNM022-2005/perlinnoiselinks/perlin-noise-math-faq.html" rel="nofollow" title="" class="ext-link">ソース</a></p>
<p>4つ（3Dでは8つ）の単位座標はそれぞれ、<em>擬似乱数勾配ベクトル</em>と呼ばれるものを生成します。勾配ベクトルは正の方向（ベクトルが指し示す方向）と、当然、負の方向（ベクトルが指し示すのと逆の方向）も定義します。擬似乱数とは勾配ベクトルの方程式に入力された任意の整数に対して、常に同じ結果が出ることを意味します。従って、無作為のように見えても実際は違います。さらにこれは、それぞれの整数座標が、グラディエント関数が同じであれば決して変わらない”固有の”勾配を持つことを意味します。</p>
<p><a href="./パーリンノイズを理解する _ プログラミング _ POSTD_files/logic02-1.png"><img src="./パーリンノイズを理解する _ プログラミング _ POSTD_files/logic02-1.png" alt="logic02" width="246" height="258" class="alignnone size-full wp-image-2560"></a></p>
<p><em>図2：上の図を元にした勾配ベクトルの例</em>（<a href="http://webstaff.itn.liu.se/~stegu/TNM022-2005/perlinnoiselinks/perlin-noise-math-faq.html" rel="nofollow" title="" class="ext-link">ソース</a>）</p>
<p>しかしながら、上の図は完全に正確ではありません。この記事で扱っているKen Perlinの<em>改良パーリンノイズ</em>では、これらの勾配は全くの無作為ではありません。立方体の中心点のベクトルから辺に向かって取り出されます。</p>
<pre class="prettyprint lang- linenums prettyprinted" title="" style=""><ol class="linenums"><li class="L0"><span class="pun">(</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">0</span><span class="pun">),(-</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">0</span><span class="pun">),(</span><span class="lit">1</span><span class="pun">,-</span><span class="lit">1</span><span class="pun">,</span><span class="lit">0</span><span class="pun">),(-</span><span class="lit">1</span><span class="pun">,-</span><span class="lit">1</span><span class="pun">,</span><span class="lit">0</span><span class="pun">),</span></li><li class="L1"><span class="pun">(</span><span class="lit">1</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">1</span><span class="pun">),(-</span><span class="lit">1</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">1</span><span class="pun">),(</span><span class="lit">1</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,-</span><span class="lit">1</span><span class="pun">),(-</span><span class="lit">1</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,-</span><span class="lit">1</span><span class="pun">),</span></li><li class="L2"><span class="pun">(</span><span class="lit">0</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">),(</span><span class="lit">0</span><span class="pun">,-</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">),(</span><span class="lit">0</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,-</span><span class="lit">1</span><span class="pun">),(</span><span class="lit">0</span><span class="pun">,-</span><span class="lit">1</span><span class="pun">,-</span><span class="lit">1</span><span class="pun">)</span></li></ol></pre>
<p>これらの特定の勾配ベクトルの根拠は<a href="http://mrl.nyu.edu/~perlin/paper445.pdf" rel="nofollow" title="" class="ext-link">Ken PerlinのSIFFRAPH 2002の論文<em>「Improving Noise」</em></a>で述べられています。<em>注：パーリンノイズに関する他の記事の多くは、これらのベクトルを使用していない、改良前のパーリンノイズのアルゴリズムを参照しています。例えば、図2は、改良アルゴリズムが発表される前に書かれたソースを参照しているため、初期のアルゴリズムを示しています。しかしながら、根本的な考え方は同じです。</em></p>
<p>次に、任意の点から格子線上の8つの周囲点へ向かう4つ（3Dでは8つ）のベクトルを計算する必要があります。2次元の場合の例を以下に示します。</p>
<p><a href="./パーリンノイズを理解する _ プログラミング _ POSTD_files/logic03-1.png"><img src="./パーリンノイズを理解する _ プログラミング _ POSTD_files/logic03-1.png" alt="logic03" width="191" height="100" class="alignnone size-full wp-image-2561"></a></p>
<p><em>図3：距離ベクトルの例</em>（<a href="http://webstaff.itn.liu.se/~stegu/TNM022-2005/perlinnoiselinks/perlin-noise-math-faq.html" rel="nofollow" title="" class="ext-link">ソース</a>）</p>
<p>そして2つのベクトル（勾配ベクトルと距離ベクトル）の間の<a href="http://ja.wikipedia.org/wiki/%E3%83%89%E3%83%83%E3%83%88%E7%A9%8D" rel="nofollow" title="" class="ext-link">ドット積</a>を求めます。これにより最終的な<em>影響</em>値が分かります。</p>
<pre class="prettyprint lang- linenums prettyprinted" title="" style=""><ol class="linenums"><li class="L0"><span class="pln">grad</span><span class="pun">.</span><span class="pln">x </span><span class="pun">*</span><span class="pln"> dist</span><span class="pun">.</span><span class="pln">x </span><span class="pun">+</span><span class="pln"> grad</span><span class="pun">.</span><span class="pln">y </span><span class="pun">*</span><span class="pln"> dist</span><span class="pun">.</span><span class="pln">y </span><span class="pun">+</span><span class="pln"> grad</span><span class="pun">.</span><span class="pln">z </span><span class="pun">*</span><span class="pln"> dist</span><span class="pun">.</span><span class="pln">z </span></li></ol></pre>
<p>2つのベクトルの<a href="http://ja.wikipedia.org/wiki/%E3%83%89%E3%83%83%E3%83%88%E7%A9%8D" rel="nofollow" title="" class="ext-link">ドット積</a>は、それらのベクトルがなす角の余弦とその2つのベクトルの大きさを掛けたものに等しいため、これが成り立ちます。</p>
<pre class="prettyprint lang- linenums prettyprinted" title="" style=""><ol class="linenums"><li class="L0"><span class="pln">dot</span><span class="pun">(</span><span class="pln">vec1</span><span class="pun">,</span><span class="pln">vec2</span><span class="pun">)</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> cos</span><span class="pun">(</span><span class="pln">angle</span><span class="pun">(</span><span class="pln">vec1</span><span class="pun">,</span><span class="pln">vec2</span><span class="pun">))</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> vec1</span><span class="pun">.</span><span class="pln">length </span><span class="pun">*</span><span class="pln"> vec2</span><span class="pun">.</span><span class="pln">length</span></li></ol></pre>
<p>言い換えると、もし2つのベクトルが同じ方向を指していれば、ドット積は以下のようになります。</p>
<pre class="prettyprint lang- linenums prettyprinted" title="" style=""><ol class="linenums"><li class="L0"><span class="lit">1</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> vec1</span><span class="pun">.</span><span class="pln">length </span><span class="pun">*</span><span class="pln"> vec2</span><span class="pun">.</span><span class="pln">length </span></li></ol></pre>
<p>また2つのベクトルが逆方向を指している場合のドット積は、以下のとおりです。</p>
<pre class="prettyprint lang- linenums prettyprinted" title="" style=""><ol class="linenums"><li class="L0"><span class="pun">-</span><span class="lit">1</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> vec1</span><span class="pun">.</span><span class="pln">length </span><span class="pun">*</span><span class="pln"> vec2</span><span class="pun">.</span><span class="pln">length </span></li></ol></pre>
<p>2つのベクトルが直交していれば、ドット積は0になります。</p>
<p>このように勾配の方向と同じであれば、ドット積の結果は正の数となり、逆方向であれば負の数になります。これが勾配ベクトルの正負の定義方法です。この正負の影響を表す図形を以下に表します。</p>
<p><a href="./パーリンノイズを理解する _ プログラミング _ POSTD_files/logic04.png"><img src="./パーリンノイズを理解する _ プログラミング _ POSTD_files/logic04.png" alt="logic04" width="341" height="170" class="alignnone size-full wp-image-2562"></a></p>
<p><em>図4：2次元ノイズにおけるベクトルの正負の影響例</em>（<a href="http://gamedev.stackexchange.com/questions/23625/how-do-you-generate-tileatil-perlin-noise" rel="nofollow" title="" class="ext-link">ソース</a>）</p>
<p>次に、4つ（3Dでは8つ）の格子点の間の加重平均を算出するため、4つの値を補間する必要があります。これを行う方法は簡単です。以下のように平均を出せばいいのです（以下に示すのは2次元の例です）。</p>
<pre class="prettyprint lang- linenums prettyprinted" title="" style=""><ol class="linenums"><li class="L0"><span class="com">// Below are 4 influence values in the arrangement:</span></li><li class="L1"><span class="com">// [g1] | [g2]</span></li><li class="L2"><span class="com">// -----------</span></li><li class="L3"><span class="com">// [g3] | [g4]</span></li><li class="L4"><span class="kwd">int</span><span class="pln"> g1</span><span class="pun">,</span><span class="pln"> g2</span><span class="pun">,</span><span class="pln"> g3</span><span class="pun">,</span><span class="pln"> g4</span><span class="pun">;</span></li><li class="L5"><span class="kwd">int</span><span class="pln"> u</span><span class="pun">,</span><span class="pln"> v</span><span class="pun">;</span><span class="pln">   </span><span class="com">// These coordinates are the location of the input coordinate in its unit square.  </span></li><li class="L6"><span class="pln">            </span><span class="com">// For example a value of (0.5,0.5) is in the exact center of its unit square.</span></li><li class="L7"><span class="pln">&nbsp;</span></li><li class="L8"><span class="kwd">int</span><span class="pln"> x1 </span><span class="pun">=</span><span class="pln"> lerp</span><span class="pun">(</span><span class="pln">g1</span><span class="pun">,</span><span class="pln">g2</span><span class="pun">,</span><span class="pln">u</span><span class="pun">);</span></li><li class="L9"><span class="kwd">int</span><span class="pln"> x2 </span><span class="pun">=</span><span class="pln"> lerp</span><span class="pun">(</span><span class="pln">g3</span><span class="pun">,</span><span class="pln">h4</span><span class="pun">,</span><span class="pln">u</span><span class="pun">);</span></li><li class="L0"><span class="pln">&nbsp;</span></li><li class="L1"><span class="kwd">int</span><span class="pln"> average </span><span class="pun">=</span><span class="pln"> lerp</span><span class="pun">(</span><span class="pln">x1</span><span class="pun">,</span><span class="pln">x2</span><span class="pun">,</span><span class="pln">v</span><span class="pun">);</span></li></ol></pre>
<p>上で述べた加重平均を算出したら、完成まではあと1工程あります。最終結果は線形補間となるため、あまり美しくはなりません。簡単に計算できるものの、不自然に見えます。勾配間はゆるやかな移行が必要です。そこで、フェード関数を使用することにしました。<em>イーズ曲線</em>とも呼ばれるものです。</p>
<p><a href="./パーリンノイズを理解する _ プログラミング _ POSTD_files/logic05-1.png"><img src="./パーリンノイズを理解する _ プログラミング _ POSTD_files/logic05-1.png" alt="logic05" width="108" height="112" class="alignnone size-full wp-image-2563"></a></p>
<p><em>図5：イーズ曲線の例</em>（<a href="http://webstaff.itn.liu.se/~stegu/TNM022-2005/perlinnoiselinks/perlin-noise-math-faq.html" rel="nofollow" title="" class="ext-link">ソース</a>）</p>
<p>上述のコードの例で言うと、このイーズ曲線はuとvの値に適用されます。これにより整数座標に近づくにつれ、ゆるやかに変わります。改良パーリンノイズの実装でのフェード関数は次のようになります。</p>
<p>6t^5 – 15t^4 + 10t^3</p>
<p>理論的な話は以上です。これでパーリンノイズを生成するのに必要とされるコンポーネントは全てそろいました。次はコードに移りましょう。</p>
<h2 id="gfm-2">コード実装</h2>
<p>繰り返しになりますが、コードはC#で書かれています。コードは<a href="http://mrl.nyu.edu/~perlin/noise/" rel="nofollow" title="" class="ext-link">Ken PerlinのJava実装コード</a>に多少変更を加えたバージョンです。ノイズの繰り返し（タイル）を追加しただけではなく、明確さと可読性を上げました。コードはもちろん全て自由にお使いいただけます（私がゼロから書いたわけではありません。Ken Perlinのおかげです）。</p>
<h3 id="gfm-3">設定</h3>
<p>まず最初にするべきことは、順列テーブル、つまり<code>p[]</code>配列を設定することです。単純に0～255の乱数を包含する長さ256の配列です。後でバッファオーバーフローを起こさないように、この配列を繰り返します（全体サイズは512バイト）。</p>
<pre class="prettyprint lang- linenums prettyprinted" title="" style=""><ol class="linenums"><li class="L0"><span class="kwd">private</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">readonly</span><span class="pln"> </span><span class="kwd">int</span><span class="pun">[]</span><span class="pln"> permutation </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="lit">151</span><span class="pun">,</span><span class="lit">160</span><span class="pun">,</span><span class="lit">137</span><span class="pun">,</span><span class="lit">91</span><span class="pun">,</span><span class="lit">90</span><span class="pun">,</span><span class="lit">15</span><span class="pun">,</span><span class="pln">                 </span><span class="com">// Hash lookup table as defined by Ken Perlin.  This is a randomly</span></li><li class="L1"><span class="pln">    </span><span class="lit">131</span><span class="pun">,</span><span class="lit">13</span><span class="pun">,</span><span class="lit">201</span><span class="pun">,</span><span class="lit">95</span><span class="pun">,</span><span class="lit">96</span><span class="pun">,</span><span class="lit">53</span><span class="pun">,</span><span class="lit">194</span><span class="pun">,</span><span class="lit">233</span><span class="pun">,</span><span class="lit">7</span><span class="pun">,</span><span class="lit">225</span><span class="pun">,</span><span class="lit">140</span><span class="pun">,</span><span class="lit">36</span><span class="pun">,</span><span class="lit">103</span><span class="pun">,</span><span class="lit">30</span><span class="pun">,</span><span class="lit">69</span><span class="pun">,</span><span class="lit">142</span><span class="pun">,</span><span class="lit">8</span><span class="pun">,</span><span class="lit">99</span><span class="pun">,</span><span class="lit">37</span><span class="pun">,</span><span class="lit">240</span><span class="pun">,</span><span class="lit">21</span><span class="pun">,</span><span class="lit">10</span><span class="pun">,</span><span class="lit">23</span><span class="pun">,</span><span class="pln">    </span><span class="com">// arranged array of all numbers from 0-255 inclusive.</span></li><li class="L2"><span class="pln">    </span><span class="lit">190</span><span class="pun">,</span><span class="pln"> </span><span class="lit">6</span><span class="pun">,</span><span class="lit">148</span><span class="pun">,</span><span class="lit">247</span><span class="pun">,</span><span class="lit">120</span><span class="pun">,</span><span class="lit">234</span><span class="pun">,</span><span class="lit">75</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">26</span><span class="pun">,</span><span class="lit">197</span><span class="pun">,</span><span class="lit">62</span><span class="pun">,</span><span class="lit">94</span><span class="pun">,</span><span class="lit">252</span><span class="pun">,</span><span class="lit">219</span><span class="pun">,</span><span class="lit">203</span><span class="pun">,</span><span class="lit">117</span><span class="pun">,</span><span class="lit">35</span><span class="pun">,</span><span class="lit">11</span><span class="pun">,</span><span class="lit">32</span><span class="pun">,</span><span class="lit">57</span><span class="pun">,</span><span class="lit">177</span><span class="pun">,</span><span class="lit">33</span><span class="pun">,</span></li><li class="L3"><span class="pln">    </span><span class="lit">88</span><span class="pun">,</span><span class="lit">237</span><span class="pun">,</span><span class="lit">149</span><span class="pun">,</span><span class="lit">56</span><span class="pun">,</span><span class="lit">87</span><span class="pun">,</span><span class="lit">174</span><span class="pun">,</span><span class="lit">20</span><span class="pun">,</span><span class="lit">125</span><span class="pun">,</span><span class="lit">136</span><span class="pun">,</span><span class="lit">171</span><span class="pun">,</span><span class="lit">168</span><span class="pun">,</span><span class="pln"> </span><span class="lit">68</span><span class="pun">,</span><span class="lit">175</span><span class="pun">,</span><span class="lit">74</span><span class="pun">,</span><span class="lit">165</span><span class="pun">,</span><span class="lit">71</span><span class="pun">,</span><span class="lit">134</span><span class="pun">,</span><span class="lit">139</span><span class="pun">,</span><span class="lit">48</span><span class="pun">,</span><span class="lit">27</span><span class="pun">,</span><span class="lit">166</span><span class="pun">,</span></li><li class="L4"><span class="pln">    </span><span class="lit">77</span><span class="pun">,</span><span class="lit">146</span><span class="pun">,</span><span class="lit">158</span><span class="pun">,</span><span class="lit">231</span><span class="pun">,</span><span class="lit">83</span><span class="pun">,</span><span class="lit">111</span><span class="pun">,</span><span class="lit">229</span><span class="pun">,</span><span class="lit">122</span><span class="pun">,</span><span class="lit">60</span><span class="pun">,</span><span class="lit">211</span><span class="pun">,</span><span class="lit">133</span><span class="pun">,</span><span class="lit">230</span><span class="pun">,</span><span class="lit">220</span><span class="pun">,</span><span class="lit">105</span><span class="pun">,</span><span class="lit">92</span><span class="pun">,</span><span class="lit">41</span><span class="pun">,</span><span class="lit">55</span><span class="pun">,</span><span class="lit">46</span><span class="pun">,</span><span class="lit">245</span><span class="pun">,</span><span class="lit">40</span><span class="pun">,</span><span class="lit">244</span><span class="pun">,</span></li><li class="L5"><span class="pln">    </span><span class="lit">102</span><span class="pun">,</span><span class="lit">143</span><span class="pun">,</span><span class="lit">54</span><span class="pun">,</span><span class="pln"> </span><span class="lit">65</span><span class="pun">,</span><span class="lit">25</span><span class="pun">,</span><span class="lit">63</span><span class="pun">,</span><span class="lit">161</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="lit">216</span><span class="pun">,</span><span class="lit">80</span><span class="pun">,</span><span class="lit">73</span><span class="pun">,</span><span class="lit">209</span><span class="pun">,</span><span class="lit">76</span><span class="pun">,</span><span class="lit">132</span><span class="pun">,</span><span class="lit">187</span><span class="pun">,</span><span class="lit">208</span><span class="pun">,</span><span class="pln"> </span><span class="lit">89</span><span class="pun">,</span><span class="lit">18</span><span class="pun">,</span><span class="lit">169</span><span class="pun">,</span><span class="lit">200</span><span class="pun">,</span><span class="lit">196</span><span class="pun">,</span></li><li class="L6"><span class="pln">    </span><span class="lit">135</span><span class="pun">,</span><span class="lit">130</span><span class="pun">,</span><span class="lit">116</span><span class="pun">,</span><span class="lit">188</span><span class="pun">,</span><span class="lit">159</span><span class="pun">,</span><span class="lit">86</span><span class="pun">,</span><span class="lit">164</span><span class="pun">,</span><span class="lit">100</span><span class="pun">,</span><span class="lit">109</span><span class="pun">,</span><span class="lit">198</span><span class="pun">,</span><span class="lit">173</span><span class="pun">,</span><span class="lit">186</span><span class="pun">,</span><span class="pln"> </span><span class="lit">3</span><span class="pun">,</span><span class="lit">64</span><span class="pun">,</span><span class="lit">52</span><span class="pun">,</span><span class="lit">217</span><span class="pun">,</span><span class="lit">226</span><span class="pun">,</span><span class="lit">250</span><span class="pun">,</span><span class="lit">124</span><span class="pun">,</span><span class="lit">123</span><span class="pun">,</span></li><li class="L7"><span class="pln">    </span><span class="lit">5</span><span class="pun">,</span><span class="lit">202</span><span class="pun">,</span><span class="lit">38</span><span class="pun">,</span><span class="lit">147</span><span class="pun">,</span><span class="lit">118</span><span class="pun">,</span><span class="lit">126</span><span class="pun">,</span><span class="lit">255</span><span class="pun">,</span><span class="lit">82</span><span class="pun">,</span><span class="lit">85</span><span class="pun">,</span><span class="lit">212</span><span class="pun">,</span><span class="lit">207</span><span class="pun">,</span><span class="lit">206</span><span class="pun">,</span><span class="lit">59</span><span class="pun">,</span><span class="lit">227</span><span class="pun">,</span><span class="lit">47</span><span class="pun">,</span><span class="lit">16</span><span class="pun">,</span><span class="lit">58</span><span class="pun">,</span><span class="lit">17</span><span class="pun">,</span><span class="lit">182</span><span class="pun">,</span><span class="lit">189</span><span class="pun">,</span><span class="lit">28</span><span class="pun">,</span><span class="lit">42</span><span class="pun">,</span></li><li class="L8"><span class="pln">    </span><span class="lit">223</span><span class="pun">,</span><span class="lit">183</span><span class="pun">,</span><span class="lit">170</span><span class="pun">,</span><span class="lit">213</span><span class="pun">,</span><span class="lit">119</span><span class="pun">,</span><span class="lit">248</span><span class="pun">,</span><span class="lit">152</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">,</span><span class="lit">44</span><span class="pun">,</span><span class="lit">154</span><span class="pun">,</span><span class="lit">163</span><span class="pun">,</span><span class="pln"> </span><span class="lit">70</span><span class="pun">,</span><span class="lit">221</span><span class="pun">,</span><span class="lit">153</span><span class="pun">,</span><span class="lit">101</span><span class="pun">,</span><span class="lit">155</span><span class="pun">,</span><span class="lit">167</span><span class="pun">,</span><span class="pln"> </span><span class="lit">43</span><span class="pun">,</span><span class="lit">172</span><span class="pun">,</span><span class="lit">9</span><span class="pun">,</span></li><li class="L9"><span class="pln">    </span><span class="lit">129</span><span class="pun">,</span><span class="lit">22</span><span class="pun">,</span><span class="lit">39</span><span class="pun">,</span><span class="lit">253</span><span class="pun">,</span><span class="pln"> </span><span class="lit">19</span><span class="pun">,</span><span class="lit">98</span><span class="pun">,</span><span class="lit">108</span><span class="pun">,</span><span class="lit">110</span><span class="pun">,</span><span class="lit">79</span><span class="pun">,</span><span class="lit">113</span><span class="pun">,</span><span class="lit">224</span><span class="pun">,</span><span class="lit">232</span><span class="pun">,</span><span class="lit">178</span><span class="pun">,</span><span class="lit">185</span><span class="pun">,</span><span class="pln"> </span><span class="lit">112</span><span class="pun">,</span><span class="lit">104</span><span class="pun">,</span><span class="lit">218</span><span class="pun">,</span><span class="lit">246</span><span class="pun">,</span><span class="lit">97</span><span class="pun">,</span><span class="lit">228</span><span class="pun">,</span></li><li class="L0"><span class="pln">    </span><span class="lit">251</span><span class="pun">,</span><span class="lit">34</span><span class="pun">,</span><span class="lit">242</span><span class="pun">,</span><span class="lit">193</span><span class="pun">,</span><span class="lit">238</span><span class="pun">,</span><span class="lit">210</span><span class="pun">,</span><span class="lit">144</span><span class="pun">,</span><span class="lit">12</span><span class="pun">,</span><span class="lit">191</span><span class="pun">,</span><span class="lit">179</span><span class="pun">,</span><span class="lit">162</span><span class="pun">,</span><span class="lit">241</span><span class="pun">,</span><span class="pln"> </span><span class="lit">81</span><span class="pun">,</span><span class="lit">51</span><span class="pun">,</span><span class="lit">145</span><span class="pun">,</span><span class="lit">235</span><span class="pun">,</span><span class="lit">249</span><span class="pun">,</span><span class="lit">14</span><span class="pun">,</span><span class="lit">239</span><span class="pun">,</span><span class="lit">107</span><span class="pun">,</span></li><li class="L1"><span class="pln">    </span><span class="lit">49</span><span class="pun">,</span><span class="lit">192</span><span class="pun">,</span><span class="lit">214</span><span class="pun">,</span><span class="pln"> </span><span class="lit">31</span><span class="pun">,</span><span class="lit">181</span><span class="pun">,</span><span class="lit">199</span><span class="pun">,</span><span class="lit">106</span><span class="pun">,</span><span class="lit">157</span><span class="pun">,</span><span class="lit">184</span><span class="pun">,</span><span class="pln"> </span><span class="lit">84</span><span class="pun">,</span><span class="lit">204</span><span class="pun">,</span><span class="lit">176</span><span class="pun">,</span><span class="lit">115</span><span class="pun">,</span><span class="lit">121</span><span class="pun">,</span><span class="lit">50</span><span class="pun">,</span><span class="lit">45</span><span class="pun">,</span><span class="lit">127</span><span class="pun">,</span><span class="pln"> </span><span class="lit">4</span><span class="pun">,</span><span class="lit">150</span><span class="pun">,</span><span class="lit">254</span><span class="pun">,</span></li><li class="L2"><span class="pln">    </span><span class="lit">138</span><span class="pun">,</span><span class="lit">236</span><span class="pun">,</span><span class="lit">205</span><span class="pun">,</span><span class="lit">93</span><span class="pun">,</span><span class="lit">222</span><span class="pun">,</span><span class="lit">114</span><span class="pun">,</span><span class="lit">67</span><span class="pun">,</span><span class="lit">29</span><span class="pun">,</span><span class="lit">24</span><span class="pun">,</span><span class="lit">72</span><span class="pun">,</span><span class="lit">243</span><span class="pun">,</span><span class="lit">141</span><span class="pun">,</span><span class="lit">128</span><span class="pun">,</span><span class="lit">195</span><span class="pun">,</span><span class="lit">78</span><span class="pun">,</span><span class="lit">66</span><span class="pun">,</span><span class="lit">215</span><span class="pun">,</span><span class="lit">61</span><span class="pun">,</span><span class="lit">156</span><span class="pun">,</span><span class="lit">180</span></li><li class="L3"><span class="pun">};</span></li><li class="L4"><span class="pln">&nbsp;</span></li><li class="L5"><span class="kwd">private</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">readonly</span><span class="pln"> </span><span class="kwd">int</span><span class="pun">[]</span><span class="pln"> p</span><span class="pun">;</span><span class="pln">                                                    </span><span class="com">// Doubled permutation to avoid overflow</span></li><li class="L6"><span class="pln">&nbsp;</span></li><li class="L7"><span class="kwd">static</span><span class="pln"> </span><span class="typ">Perlin</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span></li><li class="L8"><span class="pln">    p </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="kwd">int</span><span class="pun">[</span><span class="lit">512</span><span class="pun">];</span></li><li class="L9"><span class="pln">    </span><span class="kwd">for</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> x</span><span class="pun">=</span><span class="lit">0</span><span class="pun">;</span><span class="pln">x</span><span class="pun">&lt;</span><span class="lit">512</span><span class="pun">;</span><span class="pln">x</span><span class="pun">++)</span><span class="pln"> </span><span class="pun">{</span></li><li class="L0"><span class="pln">        p</span><span class="pun">[</span><span class="pln">x</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> permutation</span><span class="pun">[</span><span class="pln">x</span><span class="pun">%</span><span class="lit">256</span><span class="pun">];</span></li><li class="L1"><span class="pln">    </span><span class="pun">}</span></li><li class="L2"><span class="pun">}</span></li></ol></pre>
<p><code>p[]</code>配列は、後でハッシュ関数で使用し、勾配ベクトルを決定します。詳細については後述します。</p>
<p>次に、パーリンノイズ関数を書き始めます。</p>
<pre class="prettyprint lang- linenums prettyprinted" title="" style=""><ol class="linenums"><li class="L0"><span class="kwd">public</span><span class="pln"> </span><span class="kwd">double</span><span class="pln"> perlin</span><span class="pun">(</span><span class="kwd">double</span><span class="pln"> x</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">double</span><span class="pln"> y</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">double</span><span class="pln"> z</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></li><li class="L1"><span class="pln">    </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">repeat </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">                                    </span><span class="com">// If we have any repeat on, change the coordinates to their "local" repetitions</span></li><li class="L2"><span class="pln">        x </span><span class="pun">=</span><span class="pln"> x</span><span class="pun">%</span><span class="pln">repeat</span><span class="pun">;</span></li><li class="L3"><span class="pln">        y </span><span class="pun">=</span><span class="pln"> y</span><span class="pun">%</span><span class="pln">repeat</span><span class="pun">;</span></li><li class="L4"><span class="pln">        z </span><span class="pun">=</span><span class="pln"> z</span><span class="pun">%</span><span class="pln">repeat</span><span class="pun">;</span></li><li class="L5"><span class="pln">    </span><span class="pun">}</span></li><li class="L6"><span class="pln">&nbsp;</span></li><li class="L7"><span class="pln">    </span><span class="kwd">int</span><span class="pln"> xi </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">int</span><span class="pun">)</span><span class="pln">x </span><span class="pun">&amp;</span><span class="pln"> </span><span class="lit">255</span><span class="pun">;</span><span class="pln">                              </span><span class="com">// Calculate the "unit cube" that the point asked will be located in</span></li><li class="L8"><span class="pln">    </span><span class="kwd">int</span><span class="pln"> yi </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">int</span><span class="pun">)</span><span class="pln">y </span><span class="pun">&amp;</span><span class="pln"> </span><span class="lit">255</span><span class="pun">;</span><span class="pln">                              </span><span class="com">// The left bound is ( |_x_|,|_y_|,|_z_| ) and the right bound is that</span></li><li class="L9"><span class="pln">    </span><span class="kwd">int</span><span class="pln"> zi </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">int</span><span class="pun">)</span><span class="pln">z </span><span class="pun">&amp;</span><span class="pln"> </span><span class="lit">255</span><span class="pun">;</span><span class="pln">                              </span><span class="com">// plus 1.  Next we calculate the location (from 0.0 to 1.0) in that cube.</span></li><li class="L0"><span class="pln">    </span><span class="kwd">double</span><span class="pln"> xf </span><span class="pun">=</span><span class="pln"> x</span><span class="pun">-(</span><span class="kwd">int</span><span class="pun">)</span><span class="pln">x</span><span class="pun">;</span></li><li class="L1"><span class="pln">    </span><span class="kwd">double</span><span class="pln"> yf </span><span class="pun">=</span><span class="pln"> y</span><span class="pun">-(</span><span class="kwd">int</span><span class="pun">)</span><span class="pln">y</span><span class="pun">;</span></li><li class="L2"><span class="pln">    </span><span class="kwd">double</span><span class="pln"> zf </span><span class="pun">=</span><span class="pln"> z</span><span class="pun">-(</span><span class="kwd">int</span><span class="pun">)</span><span class="pln">z</span><span class="pun">;</span></li><li class="L3"><span class="pln">&nbsp;</span></li><li class="L4"><span class="pln">    </span><span class="com">// ...</span></li><li class="L5"><span class="pun">}</span></li></ol></pre>
<p>上記のコードは見ての通りです。まず、変数<code>repeat</code>よりも入力座標が超過していればオーバーフローが起きるように、モジュロ（剰余）演算子を使用します。次に変数<code>xi, yi, zi</code>を用意します。これらは座標を含む単位立方体を表します。また、座標は[0,255]の包括的範囲に限定し、<code>p[]</code>配列にアクセスするときにオーバーフローエラーにならないようにします。実はこれには残念な副作用があります。パーリンノイズは常に全ての座標を繰り返してしまうのです。しかしパーリンノイズでは小数点座標がありえるため、この繰り返しは問題ではありません。そして最後に単位立方体内部の座標の位置を求めます。基本的には<code>n = n % 1.0</code>となり、<em>n</em>は座標を表します。</p>
<h3 id="gfm-4">フェード関数</h3>
<p>今度は上記（図5）に書かれているフェード関数を定義する必要があります。先程も書いたとおり、これはパーリンノイズのフェード関数です。<br>
6t5-15t4+10t3<br>
コード内では以下のように定義されます。</p>
<pre class="prettyprint lang- linenums prettyprinted" title="" style=""><ol class="linenums"><li class="L0"><span class="kwd">public</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">double</span><span class="pln"> fade</span><span class="pun">(</span><span class="kwd">double</span><span class="pln"> t</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></li><li class="L1"><span class="pln">                                                        </span><span class="com">// Fade function as defined by Ken Perlin.  This eases coordinate values</span></li><li class="L2"><span class="pln">                                                        </span><span class="com">// so that they will ease towards integral values.  This ends up smoothing</span></li><li class="L3"><span class="pln">                                                        </span><span class="com">// the final output.</span></li><li class="L4"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> t </span><span class="pun">*</span><span class="pln"> t </span><span class="pun">*</span><span class="pln"> t </span><span class="pun">*</span><span class="pln"> </span><span class="pun">(</span><span class="pln">t </span><span class="pun">*</span><span class="pln"> </span><span class="pun">(</span><span class="pln">t </span><span class="pun">*</span><span class="pln"> </span><span class="lit">6</span><span class="pln"> </span><span class="pun">-</span><span class="pln"> </span><span class="lit">15</span><span class="pun">)</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> </span><span class="lit">10</span><span class="pun">);</span><span class="pln">         </span><span class="com">// 6t^5 - 15t^4 + 10t^3</span></li><li class="L5"><span class="pun">}</span></li><li class="L6"><span class="pln">&nbsp;</span></li><li class="L7"><span class="kwd">public</span><span class="pln"> </span><span class="kwd">double</span><span class="pln"> perlin</span><span class="pun">(</span><span class="kwd">double</span><span class="pln"> x</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">double</span><span class="pln"> y</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">double</span><span class="pln"> z</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></li><li class="L8"><span class="pln">    </span><span class="com">// ...</span></li><li class="L9"><span class="pln">&nbsp;</span></li><li class="L0"><span class="pln">    </span><span class="kwd">double</span><span class="pln"> u </span><span class="pun">=</span><span class="pln"> fade</span><span class="pun">(</span><span class="pln">xf</span><span class="pun">);</span></li><li class="L1"><span class="pln">    </span><span class="kwd">double</span><span class="pln"> v </span><span class="pun">=</span><span class="pln"> fade</span><span class="pun">(</span><span class="pln">yf</span><span class="pun">);</span></li><li class="L2"><span class="pln">    </span><span class="kwd">double</span><span class="pln"> w </span><span class="pun">=</span><span class="pln"> fade</span><span class="pun">(</span><span class="pln">zf</span><span class="pun">);</span></li><li class="L3"><span class="pln">&nbsp;</span></li><li class="L4"><span class="pln">    </span><span class="com">// ...</span></li><li class="L5"><span class="pun">}</span></li></ol></pre>
<p>u、v、wの値は後から補間して使用します。</p>
<h3 id="gfm-5">ハッシュ関数</h3>
<p>パーリンノイズのハッシュ関数は、入力する全座標の固有値を得るために使用されます。Wikipediaでは、<em>ハッシュ関数</em>は以下のように定義されています。</p>
<blockquote>
<p>…あるデータが与えられた場合にそのデータを代表する数値を得る操作、または、その様な数値を得るための関数のこと。</p>
</blockquote>
<p>これはパーリンノイズが使用しているハッシュ関数です。前に作成した<code>p[]</code>のテーブルを使っています。</p>
<pre class="prettyprint lang- linenums prettyprinted" title="" style=""><ol class="linenums"><li class="L0"><span class="kwd">public</span><span class="pln"> </span><span class="kwd">double</span><span class="pln"> perlin</span><span class="pun">(</span><span class="kwd">double</span><span class="pln"> x</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">double</span><span class="pln"> y</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">double</span><span class="pln"> z</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></li><li class="L1"><span class="pln">    </span><span class="com">// ...</span></li><li class="L2"><span class="pln">&nbsp;</span></li><li class="L3"><span class="pln">    </span><span class="kwd">int</span><span class="pln"> aaa</span><span class="pun">,</span><span class="pln"> aba</span><span class="pun">,</span><span class="pln"> aab</span><span class="pun">,</span><span class="pln"> abb</span><span class="pun">,</span><span class="pln"> baa</span><span class="pun">,</span><span class="pln"> bba</span><span class="pun">,</span><span class="pln"> bab</span><span class="pun">,</span><span class="pln"> bbb</span><span class="pun">;</span></li><li class="L4"><span class="pln">    aaa </span><span class="pun">=</span><span class="pln"> p</span><span class="pun">[</span><span class="pln">p</span><span class="pun">[</span><span class="pln">p</span><span class="pun">[</span><span class="pln">    xi </span><span class="pun">]+</span><span class="pln">    yi </span><span class="pun">]+</span><span class="pln">    zi </span><span class="pun">];</span></li><li class="L5"><span class="pln">    aba </span><span class="pun">=</span><span class="pln"> p</span><span class="pun">[</span><span class="pln">p</span><span class="pun">[</span><span class="pln">p</span><span class="pun">[</span><span class="pln">    xi </span><span class="pun">]+</span><span class="pln">inc</span><span class="pun">(</span><span class="pln">yi</span><span class="pun">)]+</span><span class="pln">    zi </span><span class="pun">];</span></li><li class="L6"><span class="pln">    aab </span><span class="pun">=</span><span class="pln"> p</span><span class="pun">[</span><span class="pln">p</span><span class="pun">[</span><span class="pln">p</span><span class="pun">[</span><span class="pln">    xi </span><span class="pun">]+</span><span class="pln">    yi </span><span class="pun">]+</span><span class="pln">inc</span><span class="pun">(</span><span class="pln">zi</span><span class="pun">)];</span></li><li class="L7"><span class="pln">    abb </span><span class="pun">=</span><span class="pln"> p</span><span class="pun">[</span><span class="pln">p</span><span class="pun">[</span><span class="pln">p</span><span class="pun">[</span><span class="pln">    xi </span><span class="pun">]+</span><span class="pln">inc</span><span class="pun">(</span><span class="pln">yi</span><span class="pun">)]+</span><span class="pln">inc</span><span class="pun">(</span><span class="pln">zi</span><span class="pun">)];</span></li><li class="L8"><span class="pln">    baa </span><span class="pun">=</span><span class="pln"> p</span><span class="pun">[</span><span class="pln">p</span><span class="pun">[</span><span class="pln">p</span><span class="pun">[</span><span class="pln">inc</span><span class="pun">(</span><span class="pln">xi</span><span class="pun">)]+</span><span class="pln">    yi </span><span class="pun">]+</span><span class="pln">    zi </span><span class="pun">];</span></li><li class="L9"><span class="pln">    bba </span><span class="pun">=</span><span class="pln"> p</span><span class="pun">[</span><span class="pln">p</span><span class="pun">[</span><span class="pln">p</span><span class="pun">[</span><span class="pln">inc</span><span class="pun">(</span><span class="pln">xi</span><span class="pun">)]+</span><span class="pln">inc</span><span class="pun">(</span><span class="pln">yi</span><span class="pun">)]+</span><span class="pln">    zi </span><span class="pun">];</span></li><li class="L0"><span class="pln">    bab </span><span class="pun">=</span><span class="pln"> p</span><span class="pun">[</span><span class="pln">p</span><span class="pun">[</span><span class="pln">p</span><span class="pun">[</span><span class="pln">inc</span><span class="pun">(</span><span class="pln">xi</span><span class="pun">)]+</span><span class="pln">    yi </span><span class="pun">]+</span><span class="pln">inc</span><span class="pun">(</span><span class="pln">zi</span><span class="pun">)];</span></li><li class="L1"><span class="pln">    bbb </span><span class="pun">=</span><span class="pln"> p</span><span class="pun">[</span><span class="pln">p</span><span class="pun">[</span><span class="pln">p</span><span class="pun">[</span><span class="pln">inc</span><span class="pun">(</span><span class="pln">xi</span><span class="pun">)]+</span><span class="pln">inc</span><span class="pun">(</span><span class="pln">yi</span><span class="pun">)]+</span><span class="pln">inc</span><span class="pun">(</span><span class="pln">zi</span><span class="pun">)];</span></li><li class="L2"><span class="pln">&nbsp;</span></li><li class="L3"><span class="pln">    </span><span class="com">// ...</span></li><li class="L4"><span class="pun">}</span></li><li class="L5"><span class="pln">&nbsp;</span></li><li class="L6"><span class="kwd">public</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> inc</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> num</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></li><li class="L7"><span class="pln">    num</span><span class="pun">++;</span></li><li class="L8"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">repeat </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> num </span><span class="pun">%=</span><span class="pln"> repeat</span><span class="pun">;</span></li><li class="L9"><span class="pln">&nbsp;</span></li><li class="L0"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> num</span><span class="pun">;</span></li><li class="L1"><span class="pun">}</span></li></ol></pre>
<p>上のハッシュ関数は、入力座標を囲む8つの単位立方座標全てをハッシュします。<code>inc()</code>は単に数を増やしてノイズが繰り返しているかを確かめるために使っています。繰り返しできるかどうかの確認が必要なければ、<code>inc(xi)</code>を<code>xi+1</code>に置き換えられます。ハッシュ関数の結果は<code>p[]</code>配列により0から255の間（包括的）の値となります。</p>
<h3 id="gfm-6">グラディエント関数</h3>
<p>私はこれまでずっと、Ken Perlinの改良前の<code>grad()</code>関数は不必要に複雑で混乱しやすいものだと思っていました。思い出してください。<code>grad()</code>の目的は、無作為に選択された勾配ベクトルと8つの位置ベクトルのドット積を計算することです。Ken Perlinは、ビットを反転させるコードを使ってこれを計算しました。</p>
<pre class="prettyprint lang- linenums prettyprinted" title="" style=""><ol class="linenums"><li class="L0"><span class="kwd">public</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">double</span><span class="pln"> grad</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> hash</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">double</span><span class="pln"> x</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">double</span><span class="pln"> y</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">double</span><span class="pln"> z</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></li><li class="L1"><span class="pln">    </span><span class="kwd">int</span><span class="pln"> h </span><span class="pun">=</span><span class="pln"> hash </span><span class="pun">&amp;</span><span class="pln"> </span><span class="lit">15</span><span class="pun">;</span><span class="pln">                                    </span><span class="com">// Take the hashed value and take the first 4 bits of it (15 == 0b1111)</span></li><li class="L2"><span class="pln">    </span><span class="kwd">double</span><span class="pln"> u </span><span class="pun">=</span><span class="pln"> h </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">8</span><span class="pln"> </span><span class="com">/* 0b1000 */</span><span class="pln"> </span><span class="pun">?</span><span class="pln"> x </span><span class="pun">:</span><span class="pln"> y</span><span class="pun">;</span><span class="pln">                </span><span class="com">// If the most significant bit (MSB) of the hash is 0 then set u = x.  Otherwise y.</span></li><li class="L3"><span class="pln">&nbsp;</span></li><li class="L4"><span class="pln">    </span><span class="kwd">double</span><span class="pln"> v</span><span class="pun">;</span><span class="pln">                                             </span><span class="com">// In Ken Perlin's original implementation this was another conditional operator (?:).  I</span></li><li class="L5"><span class="pln">                                                          </span><span class="com">// expanded it for readability.</span></li><li class="L6"><span class="pln">&nbsp;</span></li><li class="L7"><span class="pln">    </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">h </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">4</span><span class="pln"> </span><span class="com">/* 0b0100 */</span><span class="pun">)</span><span class="pln">                                </span><span class="com">// If the first and second significant bits are 0 set v = y</span></li><li class="L8"><span class="pln">        v </span><span class="pun">=</span><span class="pln"> y</span><span class="pun">;</span></li><li class="L9"><span class="pln">    </span><span class="kwd">else</span><span class="pln"> </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">h </span><span class="pun">==</span><span class="pln"> </span><span class="lit">12</span><span class="pln"> </span><span class="com">/* 0b1100 */</span><span class="pln"> </span><span class="pun">||</span><span class="pln"> h </span><span class="pun">==</span><span class="pln"> </span><span class="lit">14</span><span class="pln"> </span><span class="com">/* 0b1110*/</span><span class="pun">)</span><span class="pln">  </span><span class="com">// If the first and second significant bits are 1 set v = x</span></li><li class="L0"><span class="pln">        v </span><span class="pun">=</span><span class="pln"> x</span><span class="pun">;</span></li><li class="L1"><span class="pln">    </span><span class="kwd">else</span><span class="pln">                                                  </span><span class="com">// If the first and second significant bits are not equal (0/1, 1/0) set v = z</span></li><li class="L2"><span class="pln">        v </span><span class="pun">=</span><span class="pln"> z</span><span class="pun">;</span></li><li class="L3"><span class="pln">&nbsp;</span></li><li class="L4"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">((</span><span class="pln">h</span><span class="pun">&amp;</span><span class="lit">1</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="pun">?</span><span class="pln"> u </span><span class="pun">:</span><span class="pln"> </span><span class="pun">-</span><span class="pln">u</span><span class="pun">)+((</span><span class="pln">h</span><span class="pun">&amp;</span><span class="lit">2</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="pun">?</span><span class="pln"> v </span><span class="pun">:</span><span class="pln"> </span><span class="pun">-</span><span class="pln">v</span><span class="pun">);</span><span class="pln"> </span><span class="com">// Use the last 2 bits to decide if u and v are positive or negative.  Then return their addition.</span></li><li class="L5"><span class="pun">}</span></li></ol></pre>
<p>上のコードをもっと分かりやすい（しかも多くの言語でもっと速く書ける）書き方にすると、以下のようになります。</p>
<pre class="prettyprint lang- linenums prettyprinted" title="" style=""><ol class="linenums"><li class="L0"><span class="com">// Source: http://riven8192.blogspot.com/2010/08/calculate-perlinnoise-twice-as-fast.html</span></li><li class="L1"><span class="kwd">public</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">double</span><span class="pln"> grad</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> hash</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">double</span><span class="pln"> x</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">double</span><span class="pln"> y</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">double</span><span class="pln"> z</span><span class="pun">)</span></li><li class="L2"><span class="pun">{</span></li><li class="L3"><span class="pln">    </span><span class="kwd">switch</span><span class="pun">(</span><span class="pln">hash </span><span class="pun">&amp;</span><span class="pln"> </span><span class="lit">0xF</span><span class="pun">)</span></li><li class="L4"><span class="pln">    </span><span class="pun">{</span></li><li class="L5"><span class="pln">        </span><span class="kwd">case</span><span class="pln"> </span><span class="lit">0x0</span><span class="pun">:</span><span class="pln"> </span><span class="kwd">return</span><span class="pln">  x </span><span class="pun">+</span><span class="pln"> y</span><span class="pun">;</span></li><li class="L6"><span class="pln">        </span><span class="kwd">case</span><span class="pln"> </span><span class="lit">0x1</span><span class="pun">:</span><span class="pln"> </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">-</span><span class="pln">x </span><span class="pun">+</span><span class="pln"> y</span><span class="pun">;</span></li><li class="L7"><span class="pln">        </span><span class="kwd">case</span><span class="pln"> </span><span class="lit">0x2</span><span class="pun">:</span><span class="pln"> </span><span class="kwd">return</span><span class="pln">  x </span><span class="pun">-</span><span class="pln"> y</span><span class="pun">;</span></li><li class="L8"><span class="pln">        </span><span class="kwd">case</span><span class="pln"> </span><span class="lit">0x3</span><span class="pun">:</span><span class="pln"> </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">-</span><span class="pln">x </span><span class="pun">-</span><span class="pln"> y</span><span class="pun">;</span></li><li class="L9"><span class="pln">        </span><span class="kwd">case</span><span class="pln"> </span><span class="lit">0x4</span><span class="pun">:</span><span class="pln"> </span><span class="kwd">return</span><span class="pln">  x </span><span class="pun">+</span><span class="pln"> z</span><span class="pun">;</span></li><li class="L0"><span class="pln">        </span><span class="kwd">case</span><span class="pln"> </span><span class="lit">0x5</span><span class="pun">:</span><span class="pln"> </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">-</span><span class="pln">x </span><span class="pun">+</span><span class="pln"> z</span><span class="pun">;</span></li><li class="L1"><span class="pln">        </span><span class="kwd">case</span><span class="pln"> </span><span class="lit">0x6</span><span class="pun">:</span><span class="pln"> </span><span class="kwd">return</span><span class="pln">  x </span><span class="pun">-</span><span class="pln"> z</span><span class="pun">;</span></li><li class="L2"><span class="pln">        </span><span class="kwd">case</span><span class="pln"> </span><span class="lit">0x7</span><span class="pun">:</span><span class="pln"> </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">-</span><span class="pln">x </span><span class="pun">-</span><span class="pln"> z</span><span class="pun">;</span></li><li class="L3"><span class="pln">        </span><span class="kwd">case</span><span class="pln"> </span><span class="lit">0x8</span><span class="pun">:</span><span class="pln"> </span><span class="kwd">return</span><span class="pln">  y </span><span class="pun">+</span><span class="pln"> z</span><span class="pun">;</span></li><li class="L4"><span class="pln">        </span><span class="kwd">case</span><span class="pln"> </span><span class="lit">0x9</span><span class="pun">:</span><span class="pln"> </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">-</span><span class="pln">y </span><span class="pun">+</span><span class="pln"> z</span><span class="pun">;</span></li><li class="L5"><span class="pln">        </span><span class="kwd">case</span><span class="pln"> </span><span class="lit">0xA</span><span class="pun">:</span><span class="pln"> </span><span class="kwd">return</span><span class="pln">  y </span><span class="pun">-</span><span class="pln"> z</span><span class="pun">;</span></li><li class="L6"><span class="pln">        </span><span class="kwd">case</span><span class="pln"> </span><span class="lit">0xB</span><span class="pun">:</span><span class="pln"> </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">-</span><span class="pln">y </span><span class="pun">-</span><span class="pln"> z</span><span class="pun">;</span></li><li class="L7"><span class="pln">        </span><span class="kwd">case</span><span class="pln"> </span><span class="lit">0xC</span><span class="pun">:</span><span class="pln"> </span><span class="kwd">return</span><span class="pln">  y </span><span class="pun">+</span><span class="pln"> x</span><span class="pun">;</span></li><li class="L8"><span class="pln">        </span><span class="kwd">case</span><span class="pln"> </span><span class="lit">0xD</span><span class="pun">:</span><span class="pln"> </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">-</span><span class="pln">y </span><span class="pun">+</span><span class="pln"> z</span><span class="pun">;</span></li><li class="L9"><span class="pln">        </span><span class="kwd">case</span><span class="pln"> </span><span class="lit">0xE</span><span class="pun">:</span><span class="pln"> </span><span class="kwd">return</span><span class="pln">  y </span><span class="pun">-</span><span class="pln"> x</span><span class="pun">;</span></li><li class="L0"><span class="pln">        </span><span class="kwd">case</span><span class="pln"> </span><span class="lit">0xF</span><span class="pun">:</span><span class="pln"> </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">-</span><span class="pln">y </span><span class="pun">-</span><span class="pln"> z</span><span class="pun">;</span></li><li class="L1"><span class="pln">        </span><span class="kwd">default</span><span class="pun">:</span><span class="pln"> </span><span class="kwd">return</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln"> </span><span class="com">// never happens</span></li><li class="L2"><span class="pln">    </span><span class="pun">}</span></li><li class="L3"><span class="pun">}</span></li></ol></pre>
<p>上のコードのソースは、<a href="http://riven8192.blogspot.jp/2010/08/calculate-perlinnoise-twice-as-fast.html" rel="nofollow" title="" class="ext-link">こちら</a>で確認いただけます。どのような場合でも、この2つのコードは同じ働きをします。どちらも以下の12のベクトルから無作為に1つのベクトルを選択します。</p>
<pre class="prettyprint lang- linenums prettyprinted" title="" style=""><ol class="linenums"><li class="L0"><span class="pun">(</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">0</span><span class="pun">),(-</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">0</span><span class="pun">),(</span><span class="lit">1</span><span class="pun">,-</span><span class="lit">1</span><span class="pun">,</span><span class="lit">0</span><span class="pun">),(-</span><span class="lit">1</span><span class="pun">,-</span><span class="lit">1</span><span class="pun">,</span><span class="lit">0</span><span class="pun">),</span></li><li class="L1"><span class="pun">(</span><span class="lit">1</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">1</span><span class="pun">),(-</span><span class="lit">1</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">1</span><span class="pun">),(</span><span class="lit">1</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,-</span><span class="lit">1</span><span class="pun">),(-</span><span class="lit">1</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,-</span><span class="lit">1</span><span class="pun">),</span></li><li class="L2"><span class="pun">(</span><span class="lit">0</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">),(</span><span class="lit">0</span><span class="pun">,-</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">),(</span><span class="lit">0</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,-</span><span class="lit">1</span><span class="pun">),(</span><span class="lit">0</span><span class="pun">,-</span><span class="lit">1</span><span class="pun">,-</span><span class="lit">1</span><span class="pun">)</span></li></ol></pre>
<p>これはハッシュ関数の値の最後の4ビット（grad()の1番目のパラメータ）によって決まります。他の3つのパラメータは位置ベクトル（ドット積に用いられるもの）を表しています。</p>
<h3 id="gfm-7">全てを組み合わせる</h3>
<p>今度はここまでの全ての関数を使って、周りの8つの単位立方座標を補間し、つなげます。</p>
<pre class="prettyprint lang- linenums prettyprinted" title="" style=""><ol class="linenums"><li class="L0"><span class="kwd">public</span><span class="pln"> </span><span class="kwd">double</span><span class="pln"> perlin</span><span class="pun">(</span><span class="kwd">double</span><span class="pln"> x</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">double</span><span class="pln"> y</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">double</span><span class="pln"> z</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></li><li class="L1"><span class="pln">    </span><span class="com">// ...</span></li><li class="L2"><span class="pln">&nbsp;</span></li><li class="L3"><span class="pln">    </span><span class="kwd">double</span><span class="pln"> x1</span><span class="pun">,</span><span class="pln"> x2</span><span class="pun">,</span><span class="pln"> y1</span><span class="pun">,</span><span class="pln"> y2</span><span class="pun">;</span></li><li class="L4"><span class="pln">    x1 </span><span class="pun">=</span><span class="pln"> lerp</span><span class="pun">(</span><span class="pln">    grad </span><span class="pun">(</span><span class="pln">aaa</span><span class="pun">,</span><span class="pln"> xf  </span><span class="pun">,</span><span class="pln"> yf  </span><span class="pun">,</span><span class="pln"> zf</span><span class="pun">),</span><span class="pln">           </span><span class="com">// The gradient function calculates the dot product between a pseudorandom</span></li><li class="L5"><span class="pln">                grad </span><span class="pun">(</span><span class="pln">baa</span><span class="pun">,</span><span class="pln"> xf</span><span class="pun">-</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> yf  </span><span class="pun">,</span><span class="pln"> zf</span><span class="pun">),</span><span class="pln">             </span><span class="com">// gradient vector and the vector from the input coordinate to the 8</span></li><li class="L6"><span class="pln">                u</span><span class="pun">);</span><span class="pln">                                     </span><span class="com">// surrounding points in its unit cube.</span></li><li class="L7"><span class="pln">    x2 </span><span class="pun">=</span><span class="pln"> lerp</span><span class="pun">(</span><span class="pln">    grad </span><span class="pun">(</span><span class="pln">aba</span><span class="pun">,</span><span class="pln"> xf  </span><span class="pun">,</span><span class="pln"> yf</span><span class="pun">-</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> zf</span><span class="pun">),</span><span class="pln">           </span><span class="com">// This is all then lerped together as a sort of weighted average based on the faded (u,v,w)</span></li><li class="L8"><span class="pln">                grad </span><span class="pun">(</span><span class="pln">bba</span><span class="pun">,</span><span class="pln"> xf</span><span class="pun">-</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> yf</span><span class="pun">-</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> zf</span><span class="pun">),</span><span class="pln">             </span><span class="com">// values we made earlier.</span></li><li class="L9"><span class="pln">                  u</span><span class="pun">);</span></li><li class="L0"><span class="pln">    y1 </span><span class="pun">=</span><span class="pln"> lerp</span><span class="pun">(</span><span class="pln">x1</span><span class="pun">,</span><span class="pln"> x2</span><span class="pun">,</span><span class="pln"> v</span><span class="pun">);</span></li><li class="L1"><span class="pln">&nbsp;</span></li><li class="L2"><span class="pln">    x1 </span><span class="pun">=</span><span class="pln"> lerp</span><span class="pun">(</span><span class="pln">    grad </span><span class="pun">(</span><span class="pln">aab</span><span class="pun">,</span><span class="pln"> xf  </span><span class="pun">,</span><span class="pln"> yf  </span><span class="pun">,</span><span class="pln"> zf</span><span class="pun">-</span><span class="lit">1</span><span class="pun">),</span></li><li class="L3"><span class="pln">                grad </span><span class="pun">(</span><span class="pln">bab</span><span class="pun">,</span><span class="pln"> xf</span><span class="pun">-</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> yf  </span><span class="pun">,</span><span class="pln"> zf</span><span class="pun">-</span><span class="lit">1</span><span class="pun">),</span></li><li class="L4"><span class="pln">                u</span><span class="pun">);</span></li><li class="L5"><span class="pln">    x2 </span><span class="pun">=</span><span class="pln"> lerp</span><span class="pun">(</span><span class="pln">    grad </span><span class="pun">(</span><span class="pln">abb</span><span class="pun">,</span><span class="pln"> xf  </span><span class="pun">,</span><span class="pln"> yf</span><span class="pun">-</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> zf</span><span class="pun">-</span><span class="lit">1</span><span class="pun">),</span></li><li class="L6"><span class="pln">                  grad </span><span class="pun">(</span><span class="pln">bbb</span><span class="pun">,</span><span class="pln"> xf</span><span class="pun">-</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> yf</span><span class="pun">-</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> zf</span><span class="pun">-</span><span class="lit">1</span><span class="pun">),</span></li><li class="L7"><span class="pln">                  u</span><span class="pun">);</span></li><li class="L8"><span class="pln">    y2 </span><span class="pun">=</span><span class="pln"> lerp </span><span class="pun">(</span><span class="pln">x1</span><span class="pun">,</span><span class="pln"> x2</span><span class="pun">,</span><span class="pln"> v</span><span class="pun">);</span></li><li class="L9"><span class="pln">&nbsp;</span></li><li class="L0"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">(</span><span class="pln">lerp </span><span class="pun">(</span><span class="pln">y1</span><span class="pun">,</span><span class="pln"> y2</span><span class="pun">,</span><span class="pln"> w</span><span class="pun">)+</span><span class="lit">1</span><span class="pun">)/</span><span class="lit">2</span><span class="pun">;</span><span class="pln">                      </span><span class="com">// For convenience we bind the result to 0 - 1 (theoretical min/max before is [-1, 1])</span></li><li class="L1"><span class="pun">}</span></li><li class="L2"><span class="pln">&nbsp;</span></li><li class="L3"><span class="com">// Linear Interpolate</span></li><li class="L4"><span class="kwd">public</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">double</span><span class="pln"> lerp</span><span class="pun">(</span><span class="kwd">double</span><span class="pln"> a</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">double</span><span class="pln"> b</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">double</span><span class="pln"> x</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></li><li class="L5"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> a </span><span class="pun">+</span><span class="pln"> x </span><span class="pun">*</span><span class="pln"> </span><span class="pun">(</span><span class="pln">b </span><span class="pun">-</span><span class="pln"> a</span><span class="pun">);</span></li><li class="L6"><span class="pun">}</span></li></ol></pre>
<h2 id="gfm-8">複数のオクターブを利用する</h2>
<p>最後に、パーリンノイズをさらに自然に見えるようにする方法について議論したいと思います。パーリンノイズがある程度自然な振る舞いを実現させることは確かですが、自然界で見られるような不規則性を完全に表現できるわけではありません。例えば地形には、山などのように大きく広範囲に広がる特徴や、丘やくぼ地くらいの規模のもの、また石や岩などの細かい特徴、そして非常に小さなものでは小石など、地形の中ではごくわずかな差となるものまであります。これに対しての解決策は非常にシンプルです。周波数や振幅を変えた複数のノイズ関数を使い、これらを合成するのです。もちろん、周波数とはサンプリングされるデータの周期のことで、振幅とは結果が表す範囲のことです。</p>
<p><a href="./パーリンノイズを理解する _ プログラミング _ POSTD_files/octave01.png"><img src="./パーリンノイズを理解する _ プログラミング _ POSTD_files/octave01.png" alt="octave01" width="768" height="400" class="alignnone size-full wp-image-2564"></a></p>
<p><em>図6：周波数と振幅を変えたノイズの結果6例</em>（<a href="http://freespace.virgin.net/hugo.elias/models/m_perlin.htm" rel="nofollow" title="" class="ext-link">ソース</a>）</p>
<p>これらの結果を合成すると、以下のようになります。</p>
<p><a href="./パーリンノイズを理解する _ プログラミング _ POSTD_files/octave02-1.png"><img src="./パーリンノイズを理解する _ プログラミング _ POSTD_files/octave02-1.png" alt="octave02" width="256" height="200" class="alignnone size-full wp-image-2566"></a></p>
<p><em>図7：上の結果を合成したもの</em>（<a href="http://freespace.virgin.net/hugo.elias/models/m_perlin.htm" rel="nofollow" title="" class="ext-link">ソース</a>）</p>
<p>明らかに、この結果の方がはるかに説得力がありますね。上の6つのノイズは、異なるノイズの<em>オクターブ</em>を呼び出したものです。連続するそれぞれのオクターブが最終結果に与える影響はどんどん小さくなっていきます。もちろん、オクターブが1つ増えるごとにコード実行時間は線形増加しますので、実行時（例えば60fpsで実行する手続き型の炎のエフェクトなど）には数オクターブ以上使おうとしない方がいいでしょう。しかし、オクターブはデータの前処理（地形の生成など）の時は最高です。</p>
<p>では、連続したそれぞれのオクターブは<em>どのくらいの</em>影響力を持つのでしょうか。これを決めるのは、パーシステンスと呼ばれる、また別の値です。<a href="http://freespace.virgin.net/hugo.elias/models/m_perlin.htm" rel="nofollow" title="" class="ext-link">Hugo Elias</a>は、パーシステンスを以下のように定義しています。</p>
<blockquote>
<p>frequency = 2^i<br>
  amplitude = persistence^i</p>
</blockquote>
<p>ここでは、iが問題のオクターブを表しています。コード内の実装はシンプルです。</p>
<pre class="prettyprint lang- linenums prettyprinted" title="" style=""><ol class="linenums"><li class="L0"><span class="kwd">public</span><span class="pln"> </span><span class="kwd">double</span><span class="pln"> </span><span class="typ">OctavePerlin</span><span class="pun">(</span><span class="kwd">double</span><span class="pln"> x</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">double</span><span class="pln"> y</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">double</span><span class="pln"> z</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> octaves</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">double</span><span class="pln"> persistence</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></li><li class="L1"><span class="pln">    </span><span class="kwd">double</span><span class="pln"> total </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></li><li class="L2"><span class="pln">    </span><span class="kwd">double</span><span class="pln"> frequency </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span></li><li class="L3"><span class="pln">    </span><span class="kwd">double</span><span class="pln"> amplitude </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span></li><li class="L4"><span class="pln">    </span><span class="kwd">double</span><span class="pln"> maxValue </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln">  </span><span class="com">// Used for normalizing result to 0.0 - 1.0</span></li><li class="L5"><span class="pln">    </span><span class="kwd">for</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> i</span><span class="pun">=</span><span class="lit">0</span><span class="pun">;</span><span class="pln">i</span><span class="pun">&lt;</span><span class="pln">octaves</span><span class="pun">;</span><span class="pln">i</span><span class="pun">++)</span><span class="pln"> </span><span class="pun">{</span></li><li class="L6"><span class="pln">        total </span><span class="pun">+=</span><span class="pln"> perlin</span><span class="pun">(</span><span class="pln">x </span><span class="pun">*</span><span class="pln"> frequency</span><span class="pun">,</span><span class="pln"> y </span><span class="pun">*</span><span class="pln"> frequency</span><span class="pun">,</span><span class="pln"> z </span><span class="pun">*</span><span class="pln"> frequency</span><span class="pun">)</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> amplitude</span><span class="pun">;</span></li><li class="L7"><span class="pln">&nbsp;</span></li><li class="L8"><span class="pln">        maxValue </span><span class="pun">+=</span><span class="pln"> amplitude</span><span class="pun">;</span></li><li class="L9"><span class="pln">&nbsp;</span></li><li class="L0"><span class="pln">        amplitude </span><span class="pun">*=</span><span class="pln"> persistence</span><span class="pun">;</span></li><li class="L1"><span class="pln">        frequency </span><span class="pun">*=</span><span class="pln"> </span><span class="lit">2</span><span class="pun">;</span></li><li class="L2"><span class="pln">    </span><span class="pun">}</span></li><li class="L3"><span class="pln">&nbsp;</span></li><li class="L4"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> total</span><span class="pun">/</span><span class="pln">maxValue</span><span class="pun">;</span></li><li class="L5"><span class="pun">}</span></li></ol></pre>
<h2 id="gfm-9">結論</h2>
<p>以上で説明は終わりです。これでノイズを作れるようになりました。<a href="https://gist.github.com/Flafla2/f0260a861be0ebdeef76" rel="nofollow" title="" class="ext-link">ここで全てのソースコードを参照できます</a>。もし疑問点があれば、下のコメント欄で質問してください。</p>
<h3 id="gfm-10">参考文献</h3>
<p>もし興味があれば、下の参考文献をチェックしてみてください。<br>
* <a href="http://mrl.nyu.edu/~perlin/noise/" rel="nofollow" title="" class="ext-link">Ken Perlin’s “Official” Improved Perlin Noise</a>―これはKen Perlinが書いた最初のアルゴリズムです。<br>
* <a href="http://webstaff.itn.liu.se/~stegu/TNM022-2005/perlinnoiselinks/perlin-noise-math-faq.html" rel="nofollow" title="" class="ext-link">“The Perlin Noise Math FAQ”</a>―これはアルゴリズムについての理論的なリファレンスとしてすばらしいものです。しかしこちらは私がこの記事で使用したアルゴリズムではなく、80年代に書かれた<em>最初の</em>パーリンノイズのアルゴリズムを用いていることにご注意ください。<br>
* <a href="http://freespace.virgin.net/hugo.elias/models/m_perlin.htm" rel="nofollow" title="" class="ext-link">Hugo Elias’ article</a>―パーリンノイズについての最も有名な記事の1つです。これはオクターブやパーシステンス、現実世界におけるパーリンノイズの使用に関する優れた参考文献です。しかし、<strong>これは本当のパーリンノイズではありません</strong>。Hugoのアルゴリズムはパーリンノイズのように勾配に基づいたものではないのです。これはバリューノイズと呼ばれるもので、実質的にはホワイトノイズをぼかしたものです。混乱しないでくださいね。<br>
* <a href="http://devmag.org.za/2009/04/25/perlin-noise/" rel="nofollow" title="" class="ext-link">“How to use Perlin Noise in Your Games” – Devmag</a>―パーリンノイズの潜在的な利用方法についての、なかなか良い記事です。読み物としては非常に面白いですが、<strong>こちらも本当のパーリンノイズではありません</strong>。この記事の中でDevmagが使っているのはバリューノイズです。<br>
* <a href="http://http.developer.nvidia.com/GPUGems2/gpugems2_chapter26.html" rel="nofollow" title="" class="ext-link">GPU Gems – “Implementing Improved Perlin Noise”</a>―この記事はパーリンノイズを使ってリアルタイムに美しい海の景色をレンダリングするのに、GPUのものすごいパワーを利用するというものです。シェーダはすごいですね。</p>
<p>読んでいただきありがとうございました！</p>
<h3 id="gfm-11">更新</h3>
<p>2014/9/8―記事を更新しました。ドット積についてより分かりやすい説明を入れ、また記事内の誤字を修正しました。redditの<a href="http://www.reddit.com/r/programming/comments/2d28p6/understanding_perlin_noise_an_indepth_look_at_the/" rel="nofollow" title="" class="ext-link">r/programming</a>、<a href="http://www.reddit.com/r/gamedev/comments/2d284n/understanding_perlin_noise_an_indepth_look_at_the/" rel="nofollow" title="" class="ext-link">r/gamedev</a>、<a href="http://www.reddit.com/r/Unity3D/comments/2d29jj/understanding_perlin_noise_an_indepth_look_at_the/" rel="nofollow" title="" class="ext-link">r/Unity3D</a>でアドバイスをくださった皆さん、本当にありがとうございます。</p>
</div>

				
			</div>
			<!-- //block-text-content -->

			
			<!-- social -->
			<div class="block-social">
				<ul>
					<li class="block-social-hatena">
						<iframe class="hatena-bookmark-button-frame" title="このエントリーをはてなブックマークに追加" frameborder="0" scrolling="no" width="115" height="20" src="javascript:false" style="width: 115px; height: 20px;" src="./パーリンノイズを理解する _ プログラミング _ POSTD_files/saved_resource(1).html"></iframe>
					</li>
					<li class="block-social-facebook">
						<div class="fb-like fb_iframe_widget" data-layout="button_count" data-action="like" data-show-faces="false" data-share="false" fb-xfbml-state="rendered" fb-iframe-plugin-query="action=like&amp;app_id=1442963845953594&amp;container_width=0&amp;href=http%3A%2F%2Fpostd.cc%2Funderstanding-perlin-noise%2F&amp;layout=button_count&amp;locale=ja_JP&amp;sdk=joey&amp;share=false&amp;show_faces=false"><span style="vertical-align: bottom; width: 89px; height: 20px;"><iframe name="ff79f5f5a40008" width="1000px" height="1000px" frameborder="0" allowtransparency="true" allowfullscreen="true" scrolling="no" title="fb:like Facebook Social Plugin" src="./パーリンノイズを理解する _ プログラミング _ POSTD_files/like(2).html" style="border: none; visibility: visible; width: 89px; height: 20px;" class=""></iframe></span></div>
					</li>
					<li class="block-social-twitter">
						<iframe id="twitter-widget-3" scrolling="no" frameborder="0" allowtransparency="true" class="twitter-share-button twitter-share-button-rendered twitter-tweet-button" title="Twitter Tweet Button" src="./パーリンノイズを理解する _ プログラミング _ POSTD_files/tweet_button.83d5793f6ebbe2046330abda6016ae93.ja(1).html" style="position: static; visibility: visible; width: 75px; height: 20px;"></iframe>
					</li>
					<li class="block-social-googleplus">
						<div id="___plusone_1" style="text-indent: 0px; margin: 0px; padding: 0px; background: transparent; border-style: none; float: none; line-height: normal; font-size: 1px; vertical-align: baseline; display: inline-block; width: 32px; height: 20px;"><iframe ng-non-bindable="" frameborder="0" hspace="0" marginheight="0" marginwidth="0" scrolling="no" style="position: static; top: 0px; width: 32px; margin: 0px; border-style: none; left: 0px; visibility: visible; height: 20px;" tabindex="0" vspace="0" width="100%" id="I1_1517279509289" name="I1_1517279509289" src="./パーリンノイズを理解する _ プログラミング _ POSTD_files/fastbutton(1).html" data-gapiattached="true" title="G+"></iframe></div>
					</li>
				</ul>
			</div>
			<!-- // social -->

			<aside class="block-feedback last">
				翻訳に対するフィードバックがございましたら、<a href="mailto:hello+feedback@postd.cc?subject=%5B%E7%BF%BB%E8%A8%B3%E3%83%95%E3%82%A3%E3%83%BC%E3%83%89%E3%83%90%E3%83%83%E3%82%AF%5D%20%E3%83%91%E3%83%BC%E3%83%AA%E3%83%B3%E3%83%8E%E3%82%A4%E3%82%BA%E3%82%92%E7%90%86%E8%A7%A3%E3%81%99%E3%82%8B">メール</a>または<a href="https://github.com/postdcc/feedback/issues/new?title=%5B%E7%BF%BB%E8%A8%B3%E3%83%95%E3%82%A3%E3%83%BC%E3%83%89%E3%83%90%E3%83%83%E3%82%AF%5D%20%E3%83%91%E3%83%BC%E3%83%AA%E3%83%B3%E3%83%8E%E3%82%A4%E3%82%BA%E3%82%92%E7%90%86%E8%A7%A3%E3%81%99%E3%82%8B" rel="nofollow" title="" class="ext-link">GitHubのIssue</a>よりお寄せください。
			</aside>

			</div><!-- .block-text -->
</div><!-- .block-titles-wrap -->
</div>
						<div id="content-wrap">

								<!-- 関連した投稿 -->
								<div id="single-related" class="related-section clearfix">
									<div class="block-text">

										<div id="single-related-section">
											<p class="single-related-title"><i class="fa fa-list-ul"></i> 関連した投稿</p>
											<div class="single-related-posts">

												<section class="single-related-posts-post">
													<h3>
														<a href="http://postd.cc/alphago-zero-how-and-why-it-works/" class="track-me" data-ga-category="related-posts" data-ga-action="click - txt" data-ga-label="http://postd.cc/alphago-zero-how-and-why-it-works/">AlphaGo Zeroの動作方法と理由</a>
													</h3>
													<span>2017.12.19</span>
													<figure>
														<a href="http://postd.cc/alphago-zero-how-and-why-it-works/" class="track-me" data-ga-category="related-posts" data-ga-action="click - img" data-ga-label="http://postd.cc/alphago-zero-how-and-why-it-works/">
															<img src="./パーリンノイズを理解する _ プログラミング _ POSTD_files/alphago-zero-how-and-why-it-works-150x150.png" alt="" class="transition">
														</a>
													</figure>

													
      <div class="block-meta-social">
        <a href="http://b.hatena.ne.jp/add?mode=confirm&amp;url=http%3A%2F%2Fpostd.cc%2Falphago-zero-how-and-why-it-works%2F&amp;title=AlphaGo+Zero%E3%81%AE%E5%8B%95%E4%BD%9C%E6%96%B9%E6%B3%95%E3%81%A8%E7%90%86%E7%94%B1+%7C+POSTD" title="このエントリーをはてなブックマークに追加" onclick="window.open(this.href,&#39;hatena&#39;, &#39;width=500, height=450, personalbar=0, toolbar=0, scrollbars=1, resizable=1&#39;); return false;">
          <i class="fa fa-hatena-square"></i>
                  </a>
        <a href="https://www.facebook.com/share.php?u=http%3A%2F%2Fpostd.cc%2Falphago-zero-how-and-why-it-works%2F" onclick="window.open(this.href,&#39;facebook&#39;, &#39;width=550, height=450, personalbar=0, toolbar=0, scrollbars=1, resizable=1&#39;); return false;">
          <i class="fa fa-facebook-square"></i>
                  </a>
        <a href="https://twitter.com/share?url=http%3A%2F%2Fpostd.cc%2Falphago-zero-how-and-why-it-works%2F&amp;text=AlphaGo+Zero%E3%81%AE%E5%8B%95%E4%BD%9C%E6%96%B9%E6%B3%95%E3%81%A8%E7%90%86%E7%94%B1+%7C+POSTD&amp;via=POSTDcc" onclick="window.open(this.href,&#39;twitter&#39;, &#39;width=550, height=450, personalbar=0, toolbar=0, scrollbars=1, resizable=1&#39;); return false;">
          <i class="fa fa-twitter-square"></i>
                  </a>
        <a href="https://plus.google.com/share?url=http%3A%2F%2Fpostd.cc%2Falphago-zero-how-and-why-it-works%2F" onclick="window.open(this.href,&#39;googleplus&#39;, &#39;width=550, height=450, personalbar=0, toolbar=0, scrollbars=1, resizable=1&#39;); return false;">
          <i class="fa fa-google-plus"></i>
                  </a>
      </div>

													</section>


												<section class="single-related-posts-post">
													<h3>
														<a href="http://postd.cc/semantic-segmentation-deep-learning-review/" class="track-me" data-ga-category="related-posts" data-ga-action="click - txt" data-ga-label="http://postd.cc/semantic-segmentation-deep-learning-review/">ディープラーニングにおけるセマンティックセグメンテーションのガイド2017年版</a>
													</h3>
													<span>2017.12.05</span>
													<figure>
														<a href="http://postd.cc/semantic-segmentation-deep-learning-review/" class="track-me" data-ga-category="related-posts" data-ga-action="click - img" data-ga-label="http://postd.cc/semantic-segmentation-deep-learning-review/">
															<img src="./パーリンノイズを理解する _ プログラミング _ POSTD_files/semantic-segmentation-deep-learning-review-150x150.png" alt="" class="transition">
														</a>
													</figure>

													
      <div class="block-meta-social">
        <a href="http://b.hatena.ne.jp/add?mode=confirm&amp;url=http%3A%2F%2Fpostd.cc%2Fsemantic-segmentation-deep-learning-review%2F&amp;title=%E3%83%87%E3%82%A3%E3%83%BC%E3%83%97%E3%83%A9%E3%83%BC%E3%83%8B%E3%83%B3%E3%82%B0%E3%81%AB%E3%81%8A%E3%81%91%E3%82%8B%E3%82%BB%E3%83%9E%E3%83%B3%E3%83%86%E3%82%A3%E3%83%83%E3%82%AF%E3%82%BB%E3%82%B0%E3%83%A1%E3%83%B3%E3%83%86%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E3%81%AE%E3%82%AC%E3%82%A4%E3%83%892017%E5%B9%B4%E7%89%88+%7C+POSTD" title="このエントリーをはてなブックマークに追加" onclick="window.open(this.href,&#39;hatena&#39;, &#39;width=500, height=450, personalbar=0, toolbar=0, scrollbars=1, resizable=1&#39;); return false;">
          <i class="fa fa-hatena-square"></i>
                  </a>
        <a href="https://www.facebook.com/share.php?u=http%3A%2F%2Fpostd.cc%2Fsemantic-segmentation-deep-learning-review%2F" onclick="window.open(this.href,&#39;facebook&#39;, &#39;width=550, height=450, personalbar=0, toolbar=0, scrollbars=1, resizable=1&#39;); return false;">
          <i class="fa fa-facebook-square"></i>
                  </a>
        <a href="https://twitter.com/share?url=http%3A%2F%2Fpostd.cc%2Fsemantic-segmentation-deep-learning-review%2F&amp;text=%E3%83%87%E3%82%A3%E3%83%BC%E3%83%97%E3%83%A9%E3%83%BC%E3%83%8B%E3%83%B3%E3%82%B0%E3%81%AB%E3%81%8A%E3%81%91%E3%82%8B%E3%82%BB%E3%83%9E%E3%83%B3%E3%83%86%E3%82%A3%E3%83%83%E3%82%AF%E3%82%BB%E3%82%B0%E3%83%A1%E3%83%B3%E3%83%86%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E3%81%AE%E3%82%AC%E3%82%A4%E3%83%892017%E5%B9%B4%E7%89%88+%7C+POSTD&amp;via=POSTDcc" onclick="window.open(this.href,&#39;twitter&#39;, &#39;width=550, height=450, personalbar=0, toolbar=0, scrollbars=1, resizable=1&#39;); return false;">
          <i class="fa fa-twitter-square"></i>
                  </a>
        <a href="https://plus.google.com/share?url=http%3A%2F%2Fpostd.cc%2Fsemantic-segmentation-deep-learning-review%2F" onclick="window.open(this.href,&#39;googleplus&#39;, &#39;width=550, height=450, personalbar=0, toolbar=0, scrollbars=1, resizable=1&#39;); return false;">
          <i class="fa fa-google-plus"></i>
                  </a>
      </div>

													</section>


												<section class="single-related-posts-post">
													<h3>
														<a href="http://postd.cc/symspell-vs-bk-tree-100x-faster-fuzzy-string-search-spell-checking/" class="track-me" data-ga-category="related-posts" data-ga-action="click - txt" data-ga-label="http://postd.cc/symspell-vs-bk-tree-100x-faster-fuzzy-string-search-spell-checking/">SymSpell対BK木：100倍速い文字列のあいまい検索とスペルチェック</a>
													</h3>
													<span>2017.10.03</span>
													<figure>
														<a href="http://postd.cc/symspell-vs-bk-tree-100x-faster-fuzzy-string-search-spell-checking/" class="track-me" data-ga-category="related-posts" data-ga-action="click - img" data-ga-label="http://postd.cc/symspell-vs-bk-tree-100x-faster-fuzzy-string-search-spell-checking/">
															<img src="./パーリンノイズを理解する _ プログラミング _ POSTD_files/1-1l_5pOYU3AhoijKfVD-Qag-150x150.png" alt="" class="transition">
														</a>
													</figure>

													
      <div class="block-meta-social">
        <a href="http://b.hatena.ne.jp/add?mode=confirm&amp;url=http%3A%2F%2Fpostd.cc%2Fsymspell-vs-bk-tree-100x-faster-fuzzy-string-search-spell-checking%2F&amp;title=SymSpell%E5%AF%BEBK%E6%9C%A8%EF%BC%9A100%E5%80%8D%E9%80%9F%E3%81%84%E6%96%87%E5%AD%97%E5%88%97%E3%81%AE%E3%81%82%E3%81%84%E3%81%BE%E3%81%84%E6%A4%9C%E7%B4%A2%E3%81%A8%E3%82%B9%E3%83%9A%E3%83%AB%E3%83%81%E3%82%A7%E3%83%83%E3%82%AF+%7C+POSTD" title="このエントリーをはてなブックマークに追加" onclick="window.open(this.href,&#39;hatena&#39;, &#39;width=500, height=450, personalbar=0, toolbar=0, scrollbars=1, resizable=1&#39;); return false;">
          <i class="fa fa-hatena-square"></i>
                  </a>
        <a href="https://www.facebook.com/share.php?u=http%3A%2F%2Fpostd.cc%2Fsymspell-vs-bk-tree-100x-faster-fuzzy-string-search-spell-checking%2F" onclick="window.open(this.href,&#39;facebook&#39;, &#39;width=550, height=450, personalbar=0, toolbar=0, scrollbars=1, resizable=1&#39;); return false;">
          <i class="fa fa-facebook-square"></i>
                  </a>
        <a href="https://twitter.com/share?url=http%3A%2F%2Fpostd.cc%2Fsymspell-vs-bk-tree-100x-faster-fuzzy-string-search-spell-checking%2F&amp;text=SymSpell%E5%AF%BEBK%E6%9C%A8%EF%BC%9A100%E5%80%8D%E9%80%9F%E3%81%84%E6%96%87%E5%AD%97%E5%88%97%E3%81%AE%E3%81%82%E3%81%84%E3%81%BE%E3%81%84%E6%A4%9C%E7%B4%A2%E3%81%A8%E3%82%B9%E3%83%9A%E3%83%AB%E3%83%81%E3%82%A7%E3%83%83%E3%82%AF+%7C+POSTD&amp;via=POSTDcc" onclick="window.open(this.href,&#39;twitter&#39;, &#39;width=550, height=450, personalbar=0, toolbar=0, scrollbars=1, resizable=1&#39;); return false;">
          <i class="fa fa-twitter-square"></i>
                  </a>
        <a href="https://plus.google.com/share?url=http%3A%2F%2Fpostd.cc%2Fsymspell-vs-bk-tree-100x-faster-fuzzy-string-search-spell-checking%2F" onclick="window.open(this.href,&#39;googleplus&#39;, &#39;width=550, height=450, personalbar=0, toolbar=0, scrollbars=1, resizable=1&#39;); return false;">
          <i class="fa fa-google-plus"></i>
                  </a>
      </div>

													</section>


												<section class="single-related-posts-post">
													<h3>
														<a href="http://postd.cc/adventures-in-jit-compilation-part-2-an-x64-jit/" class="track-me" data-ga-category="related-posts" data-ga-action="click - txt" data-ga-label="http://postd.cc/adventures-in-jit-compilation-part-2-an-x64-jit/">JITコンパイルでの冒険　パート2：x64 JIT</a>
													</h3>
													<span>2017.09.26</span>
													<figure>
														<a href="http://postd.cc/adventures-in-jit-compilation-part-2-an-x64-jit/" class="track-me" data-ga-category="related-posts" data-ga-action="click - img" data-ga-label="http://postd.cc/adventures-in-jit-compilation-part-2-an-x64-jit/">
															<img src="./パーリンノイズを理解する _ プログラミング _ POSTD_files/brainfuck-150x150.png" alt="" class="transition">
														</a>
													</figure>

													
      <div class="block-meta-social">
        <a href="http://b.hatena.ne.jp/add?mode=confirm&amp;url=http%3A%2F%2Fpostd.cc%2Fadventures-in-jit-compilation-part-2-an-x64-jit%2F&amp;title=JIT%E3%82%B3%E3%83%B3%E3%83%91%E3%82%A4%E3%83%AB%E3%81%A7%E3%81%AE%E5%86%92%E9%99%BA%E3%80%80%E3%83%91%E3%83%BC%E3%83%882%EF%BC%9Ax64+JIT+%7C+POSTD" title="このエントリーをはてなブックマークに追加" onclick="window.open(this.href,&#39;hatena&#39;, &#39;width=500, height=450, personalbar=0, toolbar=0, scrollbars=1, resizable=1&#39;); return false;">
          <i class="fa fa-hatena-square"></i>
                  </a>
        <a href="https://www.facebook.com/share.php?u=http%3A%2F%2Fpostd.cc%2Fadventures-in-jit-compilation-part-2-an-x64-jit%2F" onclick="window.open(this.href,&#39;facebook&#39;, &#39;width=550, height=450, personalbar=0, toolbar=0, scrollbars=1, resizable=1&#39;); return false;">
          <i class="fa fa-facebook-square"></i>
                  </a>
        <a href="https://twitter.com/share?url=http%3A%2F%2Fpostd.cc%2Fadventures-in-jit-compilation-part-2-an-x64-jit%2F&amp;text=JIT%E3%82%B3%E3%83%B3%E3%83%91%E3%82%A4%E3%83%AB%E3%81%A7%E3%81%AE%E5%86%92%E9%99%BA%E3%80%80%E3%83%91%E3%83%BC%E3%83%882%EF%BC%9Ax64+JIT+%7C+POSTD&amp;via=POSTDcc" onclick="window.open(this.href,&#39;twitter&#39;, &#39;width=550, height=450, personalbar=0, toolbar=0, scrollbars=1, resizable=1&#39;); return false;">
          <i class="fa fa-twitter-square"></i>
                  </a>
        <a href="https://plus.google.com/share?url=http%3A%2F%2Fpostd.cc%2Fadventures-in-jit-compilation-part-2-an-x64-jit%2F" onclick="window.open(this.href,&#39;googleplus&#39;, &#39;width=550, height=450, personalbar=0, toolbar=0, scrollbars=1, resizable=1&#39;); return false;">
          <i class="fa fa-google-plus"></i>
                  </a>
      </div>

													</section>


												<section class="single-related-posts-post">
													<h3>
														<a href="http://postd.cc/adventures-in-jit-compilation-part-1-an-interpreter/" class="track-me" data-ga-category="related-posts" data-ga-action="click - txt" data-ga-label="http://postd.cc/adventures-in-jit-compilation-part-1-an-interpreter/">JITコンパイルでの冒険　パート1：インタプリタ</a>
													</h3>
													<span>2017.09.12</span>
													<figure>
														<a href="http://postd.cc/adventures-in-jit-compilation-part-1-an-interpreter/" class="track-me" data-ga-category="related-posts" data-ga-action="click - img" data-ga-label="http://postd.cc/adventures-in-jit-compilation-part-1-an-interpreter/">
															<img src="./パーリンノイズを理解する _ プログラミング _ POSTD_files/brainfuck-150x150.png" alt="" class="transition">
														</a>
													</figure>

													
      <div class="block-meta-social">
        <a href="http://b.hatena.ne.jp/add?mode=confirm&amp;url=http%3A%2F%2Fpostd.cc%2Fadventures-in-jit-compilation-part-1-an-interpreter%2F&amp;title=JIT%E3%82%B3%E3%83%B3%E3%83%91%E3%82%A4%E3%83%AB%E3%81%A7%E3%81%AE%E5%86%92%E9%99%BA%E3%80%80%E3%83%91%E3%83%BC%E3%83%881%EF%BC%9A%E3%82%A4%E3%83%B3%E3%82%BF%E3%83%97%E3%83%AA%E3%82%BF+%7C+POSTD" title="このエントリーをはてなブックマークに追加" onclick="window.open(this.href,&#39;hatena&#39;, &#39;width=500, height=450, personalbar=0, toolbar=0, scrollbars=1, resizable=1&#39;); return false;">
          <i class="fa fa-hatena-square"></i>
                  </a>
        <a href="https://www.facebook.com/share.php?u=http%3A%2F%2Fpostd.cc%2Fadventures-in-jit-compilation-part-1-an-interpreter%2F" onclick="window.open(this.href,&#39;facebook&#39;, &#39;width=550, height=450, personalbar=0, toolbar=0, scrollbars=1, resizable=1&#39;); return false;">
          <i class="fa fa-facebook-square"></i>
                  </a>
        <a href="https://twitter.com/share?url=http%3A%2F%2Fpostd.cc%2Fadventures-in-jit-compilation-part-1-an-interpreter%2F&amp;text=JIT%E3%82%B3%E3%83%B3%E3%83%91%E3%82%A4%E3%83%AB%E3%81%A7%E3%81%AE%E5%86%92%E9%99%BA%E3%80%80%E3%83%91%E3%83%BC%E3%83%881%EF%BC%9A%E3%82%A4%E3%83%B3%E3%82%BF%E3%83%97%E3%83%AA%E3%82%BF+%7C+POSTD&amp;via=POSTDcc" onclick="window.open(this.href,&#39;twitter&#39;, &#39;width=550, height=450, personalbar=0, toolbar=0, scrollbars=1, resizable=1&#39;); return false;">
          <i class="fa fa-twitter-square"></i>
                  </a>
        <a href="https://plus.google.com/share?url=http%3A%2F%2Fpostd.cc%2Fadventures-in-jit-compilation-part-1-an-interpreter%2F" onclick="window.open(this.href,&#39;googleplus&#39;, &#39;width=550, height=450, personalbar=0, toolbar=0, scrollbars=1, resizable=1&#39;); return false;">
          <i class="fa fa-google-plus"></i>
                  </a>
      </div>

													</section>


												</div>
											</div>

									</div>
								</div>
								<!-- //関連した投稿 -->


								<div class="single-paging">
									<div class="block-text">
																				<section class="single-paging-prev">
											<h3 class="block-lineTitle"><span><em>Next Post</em></span></h3>
											<a href="http://postd.cc/real-world-swift/" rel="next">現実世界のSwift ー Duolingo開発者が語るSwiftの強みと弱み</a>										</section>
																														<section class="single-paging-next">
											<h3 class="block-lineTitle"><span><em>Previous Post</em></span></h3>
											<a href="http://postd.cc/faster-builds-with-container-based-infrastructure/" rel="prev">Travis CIでコンテナベースのインフラストラクチャとDockerでより高速なビルドを</a>										</section>
																													</div>
								</div>


						</div><!-- #content-wrap -->
					
				</article><!-- #content .site-content -->
			</div><!-- #primary .content-area -->

			
		<div id="secondary" class="widget-area" role="complementary">
      <aside class="widget">
        <ul>
          <li>
            <a href="http://postd.cc/request" class="request-button track-me" data-ga-category="request-form" data-ga-action="click - button" data-ga-label="sidebar" target="_blank">翻訳リクエストを送る</a>
          </li>
                    <li>
            翻訳フィードバック
            <ul>
              <li><a href="mailto:hello+feedback@postd.cc?subject=%5B%E7%BF%BB%E8%A8%B3%E3%83%95%E3%82%A3%E3%83%BC%E3%83%89%E3%83%90%E3%83%83%E3%82%AF%5D%20%E3%83%91%E3%83%BC%E3%83%AA%E3%83%B3%E3%83%8E%E3%82%A4%E3%82%BA%E3%82%92%E7%90%86%E8%A7%A3%E3%81%99%E3%82%8B" class="feedback-button track-me" data-ga-category="feedback-form" data-ga-action="click - button" data-ga-label="sidebar">メール</a></li>
              <li><a href="https://github.com/postdcc/feedback/issues/new?title=%5B%E7%BF%BB%E8%A8%B3%E3%83%95%E3%82%A3%E3%83%BC%E3%83%89%E3%83%90%E3%83%83%E3%82%AF%5D%20%E3%83%91%E3%83%BC%E3%83%AA%E3%83%B3%E3%83%8E%E3%82%A4%E3%82%BA%E3%82%92%E7%90%86%E8%A7%A3%E3%81%99%E3%82%8B" class="feedback-button track-me ext-link" data-ga-category="feedback-form" data-ga-action="click - button" data-ga-label="sidebar" rel="nofollow" title="">GitHub Issue</a></li>
            </ul>

          </li>
                  </ul>
      </aside>



			<!-- 最近の投稿 -->
			<aside id="recent-posts-2" class="widget widget_recent_entries">
				<h3 class="widget-title">最近の投稿</h3>
				<ul>
					<li><a href="http://postd.cc/the-death-of-front-end-developers/" class="track-me" data-ga-category="recent-posts" data-ga-action="click - txt" data-ga-label="http://postd.cc/the-death-of-front-end-developers/">「フロントエンド開発者」の終焉</a></li>
					<li><a href="http://postd.cc/golang-clean-archithecture/" class="track-me" data-ga-category="recent-posts" data-ga-action="click - txt" data-ga-label="http://postd.cc/golang-clean-archithecture/">Goでクリーンアーキテクチャを試す</a></li>
					<li><a href="http://postd.cc/inside-a-super-fast-css-engine-quantum-css-aka-stylo-2/" class="track-me" data-ga-category="recent-posts" data-ga-action="click - txt" data-ga-label="http://postd.cc/inside-a-super-fast-css-engine-quantum-css-aka-stylo-2/">超高速エンジンの内部：Quantum CSS（別名Stylo）- 後編</a></li>
					<li><a href="http://postd.cc/build-your-own-regex/" class="track-me" data-ga-category="recent-posts" data-ga-action="click - txt" data-ga-label="http://postd.cc/build-your-own-regex/">40行以内で正規表現エンジンを構築</a></li>
					<li><a href="http://postd.cc/alphago-zero-how-and-why-it-works/" class="track-me" data-ga-category="recent-posts" data-ga-action="click - txt" data-ga-label="http://postd.cc/alphago-zero-how-and-why-it-works/">AlphaGo Zeroの動作方法と理由</a></li>
				</ul>
			</aside>
			<!-- //最近の投稿 -->


			<!-- タグ -->
			<aside id="tag_cloud-2" class="widget widget_tag_cloud">
				<h3 class="widget-title">タグ</h3>
				<div class="tagcloud">
					<a href="http://postd.cc/tag/ab-testing/" data-tag-count="5">ABテスト</a>
					<a href="http://postd.cc/tag/angularjs/" data-tag-count="11">AngularJS</a>
					<a href="http://postd.cc/tag/aws/" data-tag-count="8">AWS</a>
					<a href="http://postd.cc/tag/cplusplus/" data-tag-count="20">C++</a>
					<a href="http://postd.cc/tag/clojure/" data-tag-count="8">Clojure</a>
					<a href="http://postd.cc/tag/css/" data-tag-count="22">CSS</a>
					<a href="http://postd.cc/tag/clang/" data-tag-count="15">C言語</a>
					<a href="http://postd.cc/tag/docker/" data-tag-count="17">Docker</a>
					<a href="http://postd.cc/tag/dlang/" data-tag-count="3">D言語</a>
					<a href="http://postd.cc/tag/edtech/" data-tag-count="4">EdTech</a>
					<a href="http://postd.cc/tag/elm/" data-tag-count="4">Elm</a>
					<a href="http://postd.cc/tag/erlang/" data-tag-count="3">Erlang</a>
					<a href="http://postd.cc/tag/git/" data-tag-count="14">Git</a>
					<a href="http://postd.cc/tag/github/" data-tag-count="7">Github</a>
					<a href="http://postd.cc/tag/google/" data-tag-count="10">Google</a>
					<a href="http://postd.cc/tag/golang/" data-tag-count="23">Go言語</a>
					<a href="http://postd.cc/tag/haskell/" data-tag-count="19">Haskell</a>
					<a href="http://postd.cc/tag/ios/" data-tag-count="3">iOS</a>
					<a href="http://postd.cc/tag/java/" data-tag-count="14">Java</a>
					<a href="http://postd.cc/tag/javascript/" data-tag-count="109">JavaScript</a>
					<a href="http://postd.cc/tag/jquery/" data-tag-count="4">jQuery</a>
					<a href="http://postd.cc/tag/lisp/" data-tag-count="5">Lisp</a>
					<a href="http://postd.cc/tag/lua/" data-tag-count="4">Lua</a>
					<a href="http://postd.cc/tag/mysql/" data-tag-count="3">MySQL</a>
					<a href="http://postd.cc/tag/nodejs/" data-tag-count="28">NodeJS</a>
					<a href="http://postd.cc/tag/nosql/" data-tag-count="3">NoSQL</a>
					<a href="http://postd.cc/tag/objective-c/" data-tag-count="3">Objective-C</a>
					<a href="http://postd.cc/tag/ocaml/" data-tag-count="6">OCaml</a>
					<a href="http://postd.cc/tag/php/" data-tag-count="9">PHP</a>
					<a href="http://postd.cc/tag/podcast/" data-tag-count="4">podcast</a>
					<a href="http://postd.cc/tag/postgresql/" data-tag-count="6">PostgreSQL</a>
					<a href="http://postd.cc/tag/python/" data-tag-count="56">Python</a>
					<a href="http://postd.cc/tag/r/" data-tag-count="3">R</a>
					<a href="http://postd.cc/tag/react/" data-tag-count="23">React</a>
					<a href="http://postd.cc/tag/ruby/" data-tag-count="23">Ruby</a>
					<a href="http://postd.cc/tag/rust/" data-tag-count="8">Rust</a>
					<a href="http://postd.cc/tag/scala/" data-tag-count="6">Scala</a>
					<a href="http://postd.cc/tag/seo/" data-tag-count="3">SEO</a>
					<a href="http://postd.cc/tag/ssl/" data-tag-count="7">SSL</a>
					<a href="http://postd.cc/tag/stack-overflow/" data-tag-count="3">Stack Overflow</a>
					<a href="http://postd.cc/tag/swift/" data-tag-count="3">Swift</a>
					<a href="http://postd.cc/tag/tdd/" data-tag-count="12">TDD</a>
					<a href="http://postd.cc/tag/typescript/" data-tag-count="5">TypeScript</a>
					<a href="http://postd.cc/tag/ui-design/" data-tag-count="37">UIデザイン</a>
					<a href="http://postd.cc/tag/linux/" data-tag-count="25">Unix/Linux</a>
					<a href="http://postd.cc/tag/web-server/" data-tag-count="25">webサーバ</a>
					<a href="http://postd.cc/tag/y-combinator/" data-tag-count="8">Y Combinator</a>
					<a href="http://postd.cc/tag/agile/" data-tag-count="7">アジャイル</a>
					<a href="http://postd.cc/tag/algorithm/" data-tag-count="71">アルゴリズム</a>
					<a href="http://postd.cc/tag/ecosystem/" data-tag-count="5">エコシステム</a>
					<a href="http://postd.cc/tag/engineer-employment/" data-tag-count="14">エンジニア採用</a>
					<a href="http://postd.cc/tag/open-source/" data-tag-count="12">オープンソース</a>
					<a href="http://postd.cc/tag/career-path/" data-tag-count="5">キャリアパス</a>
					<a href="http://postd.cc/tag/growthhack/" data-tag-count="11">グロースハック</a>
					<a href="http://postd.cc/tag/game-development/" data-tag-count="11">ゲーム開発</a>
					<a href="http://postd.cc/tag/code-review/" data-tag-count="4">コードレビュー</a>
					<a href="http://postd.cc/tag/security/" data-tag-count="35">セキュリティ</a>
					<a href="http://postd.cc/tag/software-architecture/" data-tag-count="20">ソフトウェアアーキテクチャ</a>
					<a href="http://postd.cc/tag/data-science/" data-tag-count="28">データサイエンス</a>
					<a href="http://postd.cc/tag/database/" data-tag-count="14">データベース</a>
					<a href="http://postd.cc/tag/debugging/" data-tag-count="5">デバッグ</a>
					<a href="http://postd.cc/tag/joke/" data-tag-count="3">ネタ</a>
					<a href="http://postd.cc/tag/hackathon/" data-tag-count="3">ハッカソン</a>
					<a href="http://postd.cc/tag/performance/" data-tag-count="57">パフォーマンス</a>
					<a href="http://postd.cc/tag/business-model/" data-tag-count="14">ビジネスモデル</a>
					<a href="http://postd.cc/tag/visualization/" data-tag-count="5">ビジュアライゼーション</a>
					<a href="http://postd.cc/tag/visual-design/" data-tag-count="23">ビジュアルデザイン</a>
					<a href="http://postd.cc/tag/freelancer/" data-tag-count="3">フリーランス</a>
					<a href="http://postd.cc/tag/framework/" data-tag-count="22">フレームワーク</a>
					<a href="http://postd.cc/tag/programming-language-comparison/" data-tag-count="14">プログラミング言語比較</a>
					<a href="http://postd.cc/tag/project-management/" data-tag-count="3">プロジェクト管理</a>
					<a href="http://postd.cc/tag/best-practices/" data-tag-count="32">ベストプラクティス</a>
					<a href="http://postd.cc/tag/microservice/" data-tag-count="6">マイクロサービス</a>
					<a href="http://postd.cc/tag/summary/" data-tag-count="41">まとめ</a>
					<a href="http://postd.cc/tag/refactoring/" data-tag-count="27">リファクタリング</a>
					<a href="http://postd.cc/tag/for-beginners/" data-tag-count="25">入門</a>
					<a href="http://postd.cc/tag/type-system/" data-tag-count="5">型システム</a>
					<a href="http://postd.cc/tag/machine-learning/" data-tag-count="32">機械学習</a>
					<a href="http://postd.cc/tag/productivity/" data-tag-count="34">生産性</a>
					<a href="http://postd.cc/tag/organization/" data-tag-count="3">経営組織論</a>
					<a href="http://postd.cc/tag/statistic/" data-tag-count="6">統計</a>
					<a href="http://postd.cc/tag/ideation/" data-tag-count="4">起業アイデア</a>
					<a href="http://postd.cc/tag/entrepreneur/" data-tag-count="4">起業家</a>
					<a href="http://postd.cc/tag/functional-programming/" data-tag-count="19">関数型プログラミング</a>
					<a href="http://postd.cc/tag/customer-development/" data-tag-count="3">顧客開発</a>
				</div>
			</aside>
			<!-- //タグ -->


			<!-- 月別アーカイブ -->
			<aside id="archives-2" class="widget widget_archive">
				<h3 class="widget-title">アーカイブ</h3>
				<ul>
					<li><a href="http://postd.cc/2018/01/">2018年01月</a></li>
					<li><a href="http://postd.cc/2017/12/">2017年12月</a></li>
					<li><a href="http://postd.cc/2017/11/">2017年11月</a></li>
					<li><a href="http://postd.cc/2017/10/">2017年10月</a></li>
					<li><a href="http://postd.cc/2017/09/">2017年09月</a></li>
					<li><a href="http://postd.cc/2017/08/">2017年08月</a></li>
					<li><a href="http://postd.cc/2017/07/">2017年07月</a></li>
					<li><a href="http://postd.cc/2017/06/">2017年06月</a></li>
					<li><a href="http://postd.cc/2017/05/">2017年05月</a></li>
					<li><a href="http://postd.cc/2017/04/">2017年04月</a></li>
					<li><a href="http://postd.cc/2017/03/">2017年03月</a></li>
					<li><a href="http://postd.cc/2017/02/">2017年02月</a></li>
					<li><a href="http://postd.cc/2017/01/">2017年01月</a></li>
					<li><a href="http://postd.cc/2016/12/">2016年12月</a></li>
					<li><a href="http://postd.cc/2016/11/">2016年11月</a></li>
					<li><a href="http://postd.cc/2016/10/">2016年10月</a></li>
					<li><a href="http://postd.cc/2016/09/">2016年09月</a></li>
					<li><a href="http://postd.cc/2016/08/">2016年08月</a></li>
					<li><a href="http://postd.cc/2016/07/">2016年07月</a></li>
					<li><a href="http://postd.cc/2016/06/">2016年06月</a></li>
					<li><a href="http://postd.cc/2016/05/">2016年05月</a></li>
					<li><a href="http://postd.cc/2016/04/">2016年04月</a></li>
					<li><a href="http://postd.cc/2016/03/">2016年03月</a></li>
					<li><a href="http://postd.cc/2016/02/">2016年02月</a></li>
					<li><a href="http://postd.cc/2016/01/">2016年01月</a></li>
					<li><a href="http://postd.cc/2015/12/">2015年12月</a></li>
					<li><a href="http://postd.cc/2015/11/">2015年11月</a></li>
					<li><a href="http://postd.cc/2015/10/">2015年10月</a></li>
					<li><a href="http://postd.cc/2015/09/">2015年09月</a></li>
					<li><a href="http://postd.cc/2015/08/">2015年08月</a></li>
					<li><a href="http://postd.cc/2015/07/">2015年07月</a></li>
					<li><a href="http://postd.cc/2015/06/">2015年06月</a></li>
					<li><a href="http://postd.cc/2015/05/">2015年05月</a></li>
					<li><a href="http://postd.cc/2015/04/">2015年04月</a></li>
					<li><a href="http://postd.cc/2015/03/">2015年03月</a></li>
					<li><a href="http://postd.cc/2015/02/">2015年02月</a></li>
					<li><a href="http://postd.cc/2015/01/">2015年01月</a></li>
					<li><a href="http://postd.cc/2014/12/">2014年12月</a></li>
					<li><a href="http://postd.cc/2014/11/">2014年11月</a></li>
					<li><a href="http://postd.cc/2014/10/">2014年10月</a></li>
					<li><a href="http://postd.cc/2014/09/">2014年09月</a></li>
					<li><a href="http://postd.cc/2014/08/">2014年08月</a></li>
					<li><a href="http://postd.cc/2014/07/">2014年07月</a></li>
					<li><a href="http://postd.cc/2014/06/">2014年06月</a></li>
				</ul>
			</aside>
			<!-- //月別アーカイブ -->


      <aside class="widget widget-subscribe">
        <h3 class="widget-title">フォロー</h3>
        <ul>
          <li>
            <a href="http://cloud.feedly.com/#subscription%2Ffeed%2Fhttp%3A%2F%2Fpostd.cc%2Ffeed%2F" target="blank" class="track-me" data-ga-category="social" data-ga-action="click" data-ga-label="feedly"><img id="feedlyFollow" src="./パーリンノイズを理解する _ プログラミング _ POSTD_files/feedly-follow-rectangle-volume-medium_2x.png" alt="follow us in feedly" width="71" height="28"></a>
          </li>
          <li>
            <iframe id="twitter-widget-1" scrolling="no" frameborder="0" allowtransparency="true" class="twitter-follow-button twitter-follow-button-rendered" title="Twitter Follow Button" src="./パーリンノイズを理解する _ プログラミング _ POSTD_files/follow_button.83d5793f6ebbe2046330abda6016ae93.ja(1).html" style="position: static; visibility: visible; width: 167px; height: 20px;" data-screen-name="POSTDcc"></iframe>
          </li>
          <li>
            <div class="fb-like fb_iframe_widget" data-href="https://www.facebook.com/postdcc" data-layout="button_count" data-action="like" data-show-faces="false" data-share="true" fb-xfbml-state="rendered" fb-iframe-plugin-query="action=like&amp;app_id=1442963845953594&amp;container_width=219&amp;href=https%3A%2F%2Fwww.facebook.com%2Fpostdcc&amp;layout=button_count&amp;locale=ja_JP&amp;sdk=joey&amp;share=true&amp;show_faces=false"><span style="vertical-align: bottom; width: 151px; height: 20px;"><iframe name="f217c7471203374" width="1000px" height="1000px" frameborder="0" allowtransparency="true" allowfullscreen="true" scrolling="no" title="fb:like Facebook Social Plugin" src="./パーリンノイズを理解する _ プログラミング _ POSTD_files/like(3).html" style="border: none; visibility: visible; width: 151px; height: 20px;" class=""></iframe></span></div>
          </li>
        </ul>
      </aside>

			<aside class="fb-like">
				<h3 class="assistive-text">Facebook</h3>
				<div class="fb-like-box clearfix fb_iframe_widget" data-href="https://www.facebook.com/postdcc" data-width="100%" data-height="400px" data-colorscheme="light" data-show-faces="true" data-header="true" data-stream="false" data-show-border="false" fb-xfbml-state="rendered" fb-iframe-plugin-query="app_id=1442963845953594&amp;color_scheme=light&amp;container_width=287&amp;header=true&amp;height=400&amp;href=https%3A%2F%2Fwww.facebook.com%2Fpostdcc&amp;locale=ja_JP&amp;sdk=joey&amp;show_border=false&amp;show_faces=true&amp;stream=false&amp;width=100%25"><span style="vertical-align: top; width: 0px; height: 0px; overflow: hidden;"><iframe name="f17aa838c799428" height="400px" frameborder="0" allowtransparency="true" allowfullscreen="true" scrolling="no" title="fb:like_box Facebook Social Plugin" src="./パーリンノイズを理解する _ プログラミング _ POSTD_files/like_box.html" style="border: none; visibility: visible; width: 0px; height: 0px;"></iframe></span></div>
			</aside>

		</div><!-- #secondary .widget-area -->

		</div><!-- #main .site-main -->



	</div><!-- #main .site-main -->


	<footer id="colophon" class="site-footer clearfix">

		<div class="site-footer-nav">
			<ul>
				<li><a href="http://h.postd.cc/">Hourly POSTD</a><span class="sep"> | </span></li>
				<li><a href="http://postd.cc/about/terms/">利用規約</a><span class="sep"> | </span></li>
				<ii><a href="http://postd.cc/about/contact/">お問い合わせ</a></ii>
			</ul>
		</div>

		<!-- Footer Text -->
		<div class="copyright clearfix">

			<div class="site-info">
				<a href="http://www.recruit.jp/" rel="nofollow" title="" class="ext-link">
					<img src="./パーリンノイズを理解する _ プログラミング _ POSTD_files/copy_recruit_w.png" alt="(c) Recruit Holdings Co.,Ltd.">
				</a>
				<br>
				<a class="site-info-text ext-link" href="http://www.recruit.jp/" rel="nofollow" title="">リクルートグループサイトへ</a>
			</div><!-- .site-info -->
		</div>

	</footer><!-- #colophon .site-footer -->
<!-- #page .hfeed .site -->


<!-- MathJax Latex Plugin installed: Disabled as no shortcodes on this page --><script type="text/javascript" src="./パーリンノイズを理解する _ プログラミング _ POSTD_files/jquery.form.min.js"></script>
<script type="text/javascript">
/* <![CDATA[ */
var _wpcf7 = {"loaderUrl":"http:\/\/postd.cc\/wp\/wp-content\/plugins\/contact-form-7\/images\/ajax-loader.gif","sending":"\u9001\u4fe1\u4e2d ...","cached":"1"};
/* ]]> */
</script>
<script type="text/javascript" src="./パーリンノイズを理解する _ プログラミング _ POSTD_files/scripts.js"></script>
<script type="text/javascript">
/* <![CDATA[ */
var publisher_custom_js_vars = {"bg_image_url":"http:\/\/postd.cc\/wp\/wp-content\/uploads\/2015\/02\/use3d.png"};
/* ]]> */
</script>
<script type="text/javascript" src="./パーリンノイズを理解する _ プログラミング _ POSTD_files/postd.js"></script>

<script type="text/javascript" src="./パーリンノイズを理解する _ プログラミング _ POSTD_files/prettify.js"></script>

<script src="./パーリンノイズを理解する _ プログラミング _ POSTD_files/oct.js"></script><iframe name="oauth2relay887220136" id="oauth2relay887220136" src="./パーリンノイズを理解する _ プログラミング _ POSTD_files/postmessageRelay.html" tabindex="-1" aria-hidden="true" style="width: 1px; height: 1px; position: absolute; top: -100px;"></iframe>
<script type="text/javascript">twttr.conversion.trackPid('l5hza');</script>
<noscript>
&lt;img height="1" width="1" style="display:none;" alt=" " src="https://analytics.twitter.com/i/adsct?txn_id=l5hza&amp;p_id=Twitter"&gt;
&lt;img height="1" width="1" style="display:none;" alt=" " src="//t.co/i/adsct?txn_id=l5hza&amp;p_id=Twitter"&gt;
</noscript>

<script type="text/javascript">window.NREUM||(NREUM={});NREUM.info={"beacon":"bam.nr-data.net","licenseKey":"bc93b7ae58","applicationID":"5631998","transactionName":"M1JRZhRTDUsAV0ZRXgoYZkAPHQpWBVFKFkEMRw==","queueTime":0,"applicationTime":2,"atts":"HxVSEFxJHkU=","errorBeacon":"bam.nr-data.net","agent":""}</script>
<div class="mq-checker"></div><div class="backstretch" style="left: 0px; top: 0px; overflow: hidden; margin: 0px; padding: 0px; height: 1059px; width: 1768px; z-index: -999999; position: fixed;"><img src="./パーリンノイズを理解する _ プログラミング _ POSTD_files/use3d.png" style="position: absolute; margin: 0px; padding: 0px; border: none; width: 1768px; height: 1741.48px; max-height: none; max-width: none; z-index: -999999; left: 0px; top: -341.24px;"></div><iframe scrolling="no" frameborder="0" allowtransparency="true" src="./パーリンノイズを理解する _ プログラミング _ POSTD_files/widget_iframe.83d5793f6ebbe2046330abda6016ae93.html" style="display: none;"></iframe><script src="./パーリンノイズを理解する _ プログラミング _ POSTD_files/adsct" type="text/javascript"></script><iframe id="rufous-sandbox" scrolling="no" frameborder="0" allowtransparency="true" allowfullscreen="true" style="position: absolute; visibility: hidden; display: none; width: 0px; height: 0px; padding: 0px; border: none;" title="Twitter analytics iframe" src="./パーリンノイズを理解する _ プログラミング _ POSTD_files/saved_resource(2).html"></iframe></body></html>